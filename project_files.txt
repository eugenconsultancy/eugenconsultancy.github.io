=== MEDIA_PORTFOLIO APPS AND CONFIG FILES ===
Generated: Sat, Feb 14, 2026  9:23:23 PM
==============================================

>>> MEDIA_PORTFOLIO APPS FILES <<<

=================================================================
FILE: ./media_portfolio/core/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/core/admin.py
=================================================================
from django.contrib import admin
from .models import SiteSettings


@admin.register(SiteSettings)
class SiteSettingsAdmin(admin.ModelAdmin):
    fieldsets = (
        ('Basic Info', {
            'fields': ('site_title', 'site_description')
        }),
        ('Contact', {
            'fields': ('contact_email', 'contact_phone')
        }),
        ('Social Media', {
            'fields': ('instagram_url', 'twitter_url', 'facebook_url', 
                      'linkedin_url', 'github_url', 'behance_url')
        }),
        ('SEO', {
            'fields': ('meta_keywords', 'meta_description', 'google_analytics_id')
        }),
        ('Branding', {
            'fields': ('logo', 'favicon')
        }),
        ('Legal', {
            'fields': ('copyright_text', 'privacy_policy', 'terms_of_service')
        }),
    )
    
    def has_add_permission(self, request):
        # Prevent adding multiple settings
        return not SiteSettings.objects.exists()
=================================================================
FILE: ./media_portfolio/core/apps.py
=================================================================
from django.apps import AppConfig


class CoreConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.core'
    verbose_name = 'Core'
=================================================================
FILE: ./media_portfolio/core/models.py
=================================================================
from django.db import models
from django.utils import timezone


class BaseModel(models.Model):
    """
    Abstract base model with common fields for all models
    """
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    is_active = models.BooleanField(default=True)
    sort_order = models.IntegerField(default=0, help_text="Order for display")

    class Meta:
        abstract = True
        ordering = ['sort_order', '-created_at']


class SiteSettings(models.Model):
    """
    Global site settings
    """
    site_title = models.CharField(max_length=200, default="Media Portfolio")
    site_description = models.TextField(blank=True)
    
    # Contact info
    contact_email = models.EmailField(blank=True)
    contact_phone = models.CharField(max_length=20, blank=True)
    
    # Social media links
    instagram_url = models.URLField(blank=True)
    twitter_url = models.URLField(blank=True)
    facebook_url = models.URLField(blank=True)
    linkedin_url = models.URLField(blank=True)
    github_url = models.URLField(blank=True)
    behance_url = models.URLField(blank=True)
    
    # SEO
    meta_keywords = models.CharField(max_length=500, blank=True)
    meta_description = models.TextField(blank=True)
    google_analytics_id = models.CharField(max_length=50, blank=True)
    
    # Logo and favicon
    logo = models.ImageField(upload_to='site/', blank=True, null=True)
    favicon = models.ImageField(upload_to='site/', blank=True, null=True)
    
    # Legal
    copyright_text = models.CharField(max_length=200, default="© All Rights Reserved")
    privacy_policy = models.TextField(blank=True)
    terms_of_service = models.TextField(blank=True)
    
    class Meta:
        verbose_name = "Site Settings"
        verbose_name_plural = "Site Settings"

    def __str__(self):
        return self.site_title

    def save(self, *args, **kwargs):
        # Ensure only one instance exists
        if not self.pk and SiteSettings.objects.exists():
            return
        super().save(*args, **kwargs)
=================================================================
FILE: ./media_portfolio/core/views.py
=================================================================
from django.shortcuts import render
from django.views.generic import TemplateView, ListView
from django.http import HttpResponse, JsonResponse
from media_portfolio.media.models import MediaItem
from media_portfolio.categories.models import Category
from media_portfolio.comments.models import Testimonial
from django.db import models
from django.views.generic import View
from django.utils.decorators import method_decorator
from django.views.decorators.csrf import csrf_exempt


class HomeView(TemplateView):
    """
    Homepage view with featured content
    """
    template_name = 'core/home.html'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Get featured media
        context['featured_media'] = MediaItem.objects.filter(
            is_published=True,
            featured=True
        ).select_related().prefetch_related('categories')[:12]
        
        # Get recent media
        context['recent_media'] = MediaItem.objects.filter(
            is_published=True
        ).select_related().prefetch_related('categories')[:8]
        
        # Get categories with counts
        context['categories'] = Category.objects.filter(
            is_active=True
        ).annotate(
            media_count=models.Count('media_items')
        )[:10]
        
        # Get featured testimonials
        context['testimonials'] = Testimonial.objects.filter(
            featured=True
        )[:6]
        
        # Get statistics
        context['total_media'] = MediaItem.objects.filter(is_published=True).count()
        context['total_categories'] = Category.objects.filter(is_active=True).count()
        context['total_videos'] = MediaItem.objects.filter(
            is_published=True, 
            media_type='video'
        ).count()
        context['total_images'] = MediaItem.objects.filter(
            is_published=True, 
            media_type='image'
        ).count()
        
        return context


class AboutView(TemplateView):
    """
    About page view
    """
    template_name = 'core/about.html'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Get some featured work for the about page
        context['featured_work'] = MediaItem.objects.filter(
            is_published=True,
            featured=True
        )[:6]
        
        return context


class PrivacyPolicyView(TemplateView):
    """
    Privacy policy page
    """
    template_name = 'core/privacy.html'


class TermsOfServiceView(TemplateView):
    """
    Terms of service page
    """
    template_name = 'core/terms.html'


class SitemapView(TemplateView):
    """
    XML sitemap for search engines
    """
    template_name = 'core/sitemap.xml'
    content_type = 'application/xml'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Get all published media
        context['media_items'] = MediaItem.objects.filter(is_published=True)
        
        # Get all active categories
        context['categories'] = Category.objects.filter(is_active=True)
        
        # Get all published collections
        from media_portfolio.collections.models import Collection
        context['collections'] = Collection.objects.filter(is_published=True)
        
        return context


class RobotsTxtView(TemplateView):
    """
    robots.txt for search engine crawling instructions
    """
    template_name = 'core/robots.txt'
    content_type = 'text/plain'

@method_decorator(csrf_exempt, name='dispatch')
class SetThemeView(View):
    """
    View for setting theme preference
    """
    
    def post(self, request):
        theme = request.POST.get('theme', 'system')
        
        if theme in ['light', 'dark', 'system']:
            request.session['theme'] = theme
            
            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
                return JsonResponse({
                    'success': True,
                    'theme': theme
                })
        
        return JsonResponse({
            'success': False,
            'error': 'Invalid theme'
        }, status=400)
=================================================================
FILE: ./media_portfolio/core/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'core'

urlpatterns = [
    path('', views.HomeView.as_view(), name='home'),
    path('about/', views.AboutView.as_view(), name='about'),
    path('privacy/', views.PrivacyPolicyView.as_view(), name='privacy'),
    path('terms/', views.TermsOfServiceView.as_view(), name='terms'),
    path('sitemap/', views.SitemapView.as_view(), name='sitemap'),
    path('robots.txt', views.RobotsTxtView.as_view(), name='robots'),
]
=================================================================
FILE: ./media_portfolio/core/forms.py
=================================================================
from django import forms
from .models import SiteSettings


class SiteSettingsForm(forms.ModelForm):
    """
    Form for editing site settings in admin
    """
    class Meta:
        model = SiteSettings
        fields = '__all__'
        widgets = {
            'site_description': forms.Textarea(attrs={'rows': 3}),
            'meta_keywords': forms.TextInput(attrs={'placeholder': 'comma, separated, keywords'}),
            'meta_description': forms.Textarea(attrs={'rows': 3}),
            'privacy_policy': forms.Textarea(attrs={'rows': 10}),
            'terms_of_service': forms.Textarea(attrs={'rows': 10}),
        }


class SearchForm(forms.Form):
    """
    Global search form
    """
    q = forms.CharField(
        required=False,
        widget=forms.TextInput(attrs={
            'class': 'form-control',
            'placeholder': 'Search...',
            'aria-label': 'Search'
        })
    )
    
    type = forms.ChoiceField(
        choices=[
            ('all', 'All'),
            ('image', 'Images'),
            ('video', 'Videos'),
        ],
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    category = forms.IntegerField(
        required=False,
        widget=forms.HiddenInput()
    )
=================================================================
FILE: ./media_portfolio/media/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/media/admin.py
=================================================================
from django.contrib import admin
from django.utils.html import format_html
from .models import MediaItem, MediaGallery, GalleryItem


class GalleryItemInline(admin.TabularInline):
    model = GalleryItem
    extra = 1
    ordering = ['order']


@admin.register(MediaItem)
class MediaItemAdmin(admin.ModelAdmin):
    list_display = ['title', 'media_type', 'featured', 'is_published', 'view_count', 'created_at']
    list_filter = ['media_type', 'featured', 'is_published', 'categories', 'created_at']
    search_fields = ['title', 'description', 'tags', 'caption']
    prepopulated_fields = {'slug': ('title',)}
    readonly_fields = ['view_count', 'file_size', 'exif_data', 'media_preview']
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('title', 'slug', 'description', 'media_type')
        }),
        ('Media Files', {
            'fields': ('file', 'thumbnail', 'media_preview')
        }),
        ('Organization', {
            'fields': ('categories', 'tags', 'featured', 'is_published', 'published_date', 'sort_order')
        }),
        ('Metadata', {
            'fields': ('alt_text', 'caption', 'location', 'date_taken')
        }),
        ('Equipment', {
            'fields': ('camera_make', 'camera_model', 'lens', 'settings'),
            'classes': ('collapse',)
        }),
        ('Technical Details', {
            'fields': ('duration', 'width', 'height', 'file_size', 'exif_data'),
            'classes': ('collapse',)
        }),
        ('Copyright', {
            'fields': ('copyright_notice', 'license')
        }),
        ('Statistics', {
            'fields': ('view_count',),
            'classes': ('collapse',)
        }),
    )
    
    def media_preview(self, obj):
        if obj.file:
            if obj.media_type == 'image':
                return format_html(
                    '<img src="{}" style="max-height: 200px; max-width: 200px;" />',
                    obj.file.url
                )
            else:
                return format_html(
                    '<video width="200" controls><source src="{}" type="video/mp4"></video>',
                    obj.file.url
                )
        return "No file"
    media_preview.short_description = 'Preview'


@admin.register(MediaGallery)
class MediaGalleryAdmin(admin.ModelAdmin):
    list_display = ['title', 'layout', 'is_published', 'created_at']
    list_filter = ['layout', 'is_published']
    search_fields = ['title', 'description']
    prepopulated_fields = {'slug': ('title',)}
    inlines = [GalleryItemInline]
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('title', 'slug', 'description')
        }),
        ('Cover Image', {
            'fields': ('cover_image',)
        }),
        ('Display Options', {
            'fields': ('layout', 'is_published', 'sort_order')
        }),
    )
=================================================================
FILE: ./media_portfolio/media/apps.py
=================================================================
from django.apps import AppConfig


class MediaConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.media'
    verbose_name = 'Media Gallery'
=================================================================
FILE: ./media_portfolio/media/models.py
=================================================================
import os
from django.db import models
from django.utils import timezone
from django.core.validators import FileExtensionValidator
from media_portfolio.core.models import BaseModel
from media_portfolio.categories.models import Category


def media_upload_path(instance, filename):
    """
    Generate upload path: media/type/year/month/filename
    """
    ext = filename.split('.')[-1]
    date_path = timezone.now().strftime('%Y/%m')
    
    if instance.media_type == 'image':
        return f'uploads/images/{date_path}/{filename}'
    else:
        return f'uploads/videos/{date_path}/{filename}'


def thumbnail_upload_path(instance, filename):
    """Upload path for thumbnails"""
    ext = filename.split('.')[-1]
    date_path = timezone.now().strftime('%Y/%m')
    return f'uploads/thumbnails/{date_path}/{filename}'


class MediaItem(BaseModel):
    """
    Core model for all media items (images and videos)
    """
    MEDIA_TYPES = [
        ('image', 'Image'),
        ('video', 'Video'),
    ]
    
    LICENSE_CHOICES = [
        ('copyright', 'All Rights Reserved'),
        ('cc-by', 'Creative Commons Attribution'),
        ('cc-by-sa', 'Creative Commons Attribution-ShareAlike'),
        ('cc-by-nd', 'Creative Commons Attribution-NoDerivs'),
        ('cc-by-nc', 'Creative Commons Attribution-NonCommercial'),
        ('cc-by-nc-sa', 'Creative Commons Attribution-NonCommercial-ShareAlike'),
        ('cc-by-nc-nd', 'Creative Commons Attribution-NonCommercial-NoDerivs'),
        ('public', 'Public Domain'),
    ]
    
    # Basic info
    title = models.CharField(max_length=200)
    slug = models.SlugField(max_length=250, unique=True)
    description = models.TextField(blank=True)
    media_type = models.CharField(max_length=5, choices=MEDIA_TYPES)
    
    # Files
    file = models.FileField(
        upload_to=media_upload_path,
        validators=[
            FileExtensionValidator(
                allowed_extensions=['jpg', 'jpeg', 'png', 'gif', 'webp', 'mp4', 'mov', 'avi', 'webm']
            )
        ]
    )
    thumbnail = models.ImageField(
        upload_to=thumbnail_upload_path,
        blank=True,
        null=True,
        help_text="Auto-generated for videos, optional for images"
    )
    
    # Media metadata
    duration = models.DurationField(
        null=True,
        blank=True,
        help_text="Video duration (HH:MM:SS)"
    )
    width = models.IntegerField(null=True, blank=True)
    height = models.IntegerField(null=True, blank=True)
    file_size = models.IntegerField(
        help_text="File size in bytes",
        editable=False
    )
    
    # Display metadata
    alt_text = models.CharField(
        max_length=200,
        blank=True,
        help_text="For accessibility and SEO"
    )
    caption = models.TextField(blank=True)
    location = models.CharField(
        max_length=200,
        blank=True,
        help_text="Where this was created"
    )
    date_taken = models.DateField(
        null=True,
        blank=True,
        help_text="Date when media was created"
    )
    
    # Equipment/Camera settings
    camera_make = models.CharField(max_length=100, blank=True)
    camera_model = models.CharField(max_length=100, blank=True)
    lens = models.CharField(max_length=200, blank=True)
    settings = models.CharField(
        max_length=200,
        blank=True,
        help_text="f-stop, shutter speed, ISO, etc."
    )
    
    # Organization
    categories = models.ManyToManyField(
        Category,
        related_name='media_items',
        blank=True
    )
    tags = models.CharField(
        max_length=500,
        blank=True,
        help_text="Comma-separated tags"
    )
    
    # Display control
    featured = models.BooleanField(
        default=False,
        help_text="Show on homepage"
    )
    is_published = models.BooleanField(
        default=True,
        help_text="Visible to public"
    )
    published_date = models.DateTimeField(
        default=timezone.now
    )
    
    # Licensing/Copyright
    copyright_notice = models.CharField(
        max_length=200,
        default="© All Rights Reserved"
    )
    license = models.CharField(
        max_length=20,
        choices=LICENSE_CHOICES,
        default='copyright'
    )
    
    # EXIF data stored as JSON
    exif_data = models.JSONField(
        null=True,
        blank=True,
        help_text="Camera EXIF data"
    )
    
    # View tracking
    view_count = models.IntegerField(default=0, editable=False)
    
    class Meta:
        verbose_name = "Media Item"
        verbose_name_plural = "Media Items"
        ordering = ['-featured', 'sort_order', '-published_date']
        indexes = [
            models.Index(fields=['media_type', 'is_published']),
            models.Index(fields=['featured', 'is_published']),
            models.Index(fields=['-published_date']),
        ]

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        # Auto-generate slug
        if not self.slug:
            from django.utils.text import slugify
            self.slug = slugify(self.title)
        
        # Auto-set alt text if empty
        if not self.alt_text:
            self.alt_text = self.title
        
        # Get file size if not set
        if not self.file_size and self.file:
            try:
                self.file_size = self.file.size
            except:
                pass
        
        super().save(*args, **kwargs)

    def get_absolute_url(self):
        from django.urls import reverse
        return reverse('media:detail', args=[self.slug])

    @property
    def tag_list(self):
        """Return tags as list"""
        if self.tags:
            return [tag.strip() for tag in self.tags.split(',') if tag.strip()]
        return []

    @property
    def is_video(self):
        return self.media_type == 'video'

    @property
    def is_image(self):
        return self.media_type == 'image'

    def increment_view_count(self):
        """Increment view count"""
        self.view_count += 1
        self.save(update_fields=['view_count'])


class MediaGallery(BaseModel):
    """
    Gallery grouping multiple media items
    """
    title = models.CharField(max_length=200)
    slug = models.SlugField(max_length=250, unique=True)
    description = models.TextField(blank=True)
    
    # Gallery cover
    cover_image = models.ImageField(
        upload_to='galleries/covers/',
        blank=True,
        null=True
    )
    
    # Media items in this gallery
    media_items = models.ManyToManyField(
        MediaItem,
        through='GalleryItem',
        related_name='galleries'
    )
    
    # Display options
    layout = models.CharField(
        max_length=20,
        choices=[
            ('grid', 'Grid'),
            ('masonry', 'Masonry'),
            ('slideshow', 'Slideshow'),
        ],
        default='grid'
    )
    
    is_published = models.BooleanField(default=True)

    class Meta:
        verbose_name = "Gallery"
        verbose_name_plural = "Galleries"

    def __str__(self):
        return self.title


class GalleryItem(models.Model):
    """
    Through model for gallery items with ordering
    """
    gallery = models.ForeignKey(MediaGallery, on_delete=models.CASCADE)
    media_item = models.ForeignKey(MediaItem, on_delete=models.CASCADE)
    order = models.IntegerField(default=0)
    caption = models.TextField(blank=True)

    class Meta:
        ordering = ['order']
        unique_together = ['gallery', 'media_item']

    def __str__(self):
        return f"{self.gallery.title} - {self.media_item.title}"
=================================================================
FILE: ./media_portfolio/media/views.py
=================================================================
from django.shortcuts import render, get_object_or_404
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger
from django.db.models import Q, Count
from django.views.generic import ListView, DetailView
from .models import MediaItem, MediaGallery
from .forms import MediaSearchForm
from ..categories.models import Category


class MediaListView(ListView):
    """
    View for listing all media items with filtering
    """
    model = MediaItem
    template_name = 'media/media_list.html'
    context_object_name = 'media_items'
    paginate_by = 12

    def get_queryset(self):
        queryset = MediaItem.objects.filter(is_published=True)
        
        # Apply search filters
        form = MediaSearchForm(self.request.GET)
        if form.is_valid():
            q = form.cleaned_data.get('q')
            category = form.cleaned_data.get('category')
            media_type = form.cleaned_data.get('media_type')
            sort = form.cleaned_data.get('sort')

            if q:
                queryset = queryset.filter(
                    Q(title__icontains=q) |
                    Q(description__icontains=q) |
                    Q(tags__icontains=q) |
                    Q(caption__icontains=q)
                )
            
            if category:
                queryset = queryset.filter(categories=category)
            
            if media_type:
                queryset = queryset.filter(media_type=media_type)
            
            if sort:
                queryset = queryset.order_by(sort)
        
        # Select related for efficiency
        return queryset.select_related().prefetch_related('categories')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['search_form'] = MediaSearchForm(self.request.GET or None)
        context['categories'] = Category.objects.filter(
            is_active=True
        ).annotate(
            media_count=Count('media_items')
        )
        context['featured_items'] = MediaItem.objects.filter(
            is_published=True,
            featured=True
        )[:6]
        return context


class MediaDetailView(DetailView):
    """
    View for displaying a single media item
    """
    model = MediaItem
    template_name = 'media/media_detail.html'
    context_object_name = 'media'
    slug_field = 'slug'
    slug_url_kwarg = 'slug'

    def get_queryset(self):
        return MediaItem.objects.filter(is_published=True)

    def get(self, request, *args, **kwargs):
        # Increment view count
        response = super().get(request, *args, **kwargs)
        self.object.increment_view_count()
        return response

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Get related media (same categories)
        media = self.object
        category_ids = media.categories.values_list('id', flat=True)
        
        related = MediaItem.objects.filter(
            is_published=True,
            categories__in=category_ids
        ).exclude(
            id=media.id
        ).distinct()[:6]
        
        context['related_media'] = related
        context['next_item'] = MediaItem.objects.filter(
            is_published=True,
            published_date__gt=media.published_date
        ).order_by('published_date').first()
        
        context['prev_item'] = MediaItem.objects.filter(
            is_published=True,
            published_date__lt=media.published_date
        ).order_by('-published_date').first()
        
        return context


class GalleryListView(ListView):
    """
    View for listing all galleries
    """
    model = MediaGallery
    template_name = 'media/gallery_list.html'
    context_object_name = 'galleries'
    paginate_by = 12

    def get_queryset(self):
        return MediaGallery.objects.filter(
            is_published=True
        ).prefetch_related('media_items')


class GalleryDetailView(DetailView):
    """
    View for displaying a single gallery
    """
    model = MediaGallery
    template_name = 'media/gallery_detail.html'
    context_object_name = 'gallery'
    slug_field = 'slug'
    slug_url_kwarg = 'slug'

    def get_queryset(self):
        return MediaGallery.objects.filter(
            is_published=True
        ).prefetch_related('media_items')
=================================================================
FILE: ./media_portfolio/media/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'media'

urlpatterns = [
    path('', views.MediaListView.as_view(), name='list'),
    path('gallery/', views.GalleryListView.as_view(), name='gallery_list'),
    path('gallery/<slug:slug>/', views.GalleryDetailView.as_view(), name='gallery_detail'),
    path('<slug:slug>/', views.MediaDetailView.as_view(), name='detail'),
]
=================================================================
FILE: ./media_portfolio/media/forms.py
=================================================================
from django import forms
from .models import MediaItem, MediaGallery
from ..categories.models import Category


class MediaItemForm(forms.ModelForm):
    """
    Form for uploading/editing media items
    """
    categories = forms.ModelMultipleChoiceField(
        queryset=Category.objects.filter(is_active=True),
        widget=forms.CheckboxSelectMultiple,
        required=False
    )
    
    class Meta:
        model = MediaItem
        fields = [
            'title', 'description', 'media_type', 'file', 'thumbnail',
            'categories', 'tags', 'location', 'date_taken',
            'camera_make', 'camera_model', 'lens', 'settings',
            'alt_text', 'caption', 'featured', 'is_published',
            'copyright_notice', 'license'
        ]
        widgets = {
            'description': forms.Textarea(attrs={'rows': 4, 'class': 'form-control'}),
            'caption': forms.Textarea(attrs={'rows': 3, 'class': 'form-control'}),
            'tags': forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'comma, separated, tags'}),
            'date_taken': forms.DateInput(attrs={'type': 'date', 'class': 'form-control'}),
        }

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # Add Bootstrap classes to all fields
        for field_name, field in self.fields.items():
            if not isinstance(field.widget, (forms.CheckboxSelectMultiple, forms.RadioSelect)):
                field.widget.attrs['class'] = 'form-control'
            if field.required:
                field.widget.attrs['required'] = 'required'


class MediaSearchForm(forms.Form):
    """
    Form for searching/filtering media
    """
    q = forms.CharField(
        required=False,
        widget=forms.TextInput(attrs={
            'class': 'form-control',
            'placeholder': 'Search...'
        })
    )
    category = forms.ModelChoiceField(
        queryset=Category.objects.filter(is_active=True),
        required=False,
        empty_label="All Categories",
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    media_type = forms.ChoiceField(
        choices=[('', 'All Types')] + MediaItem.MEDIA_TYPES,
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    sort = forms.ChoiceField(
        choices=[
            ('-published_date', 'Newest First'),
            ('published_date', 'Oldest First'),
            ('title', 'Title A-Z'),
            ('-title', 'Title Z-A'),
            ('-view_count', 'Most Viewed'),
        ],
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
=================================================================
FILE: ./media_portfolio/categories/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/categories/admin.py
=================================================================
from django.contrib import admin
from .models import Category


@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = ['name', 'category_type', 'parent', 'media_count', 'sort_order', 'is_active']
    list_filter = ['category_type', 'is_active', 'parent']
    search_fields = ['name', 'description']
    prepopulated_fields = {'slug': ('name',)}
    list_editable = ['sort_order', 'is_active']
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('name', 'slug', 'category_type', 'parent', 'description')
        }),
        ('Visual', {
            'fields': ('cover_image', 'icon', 'sort_order', 'is_active')
        }),
        ('SEO', {
            'fields': ('meta_title', 'meta_description'),
            'classes': ('collapse',)
        }),
    )
=================================================================
FILE: ./media_portfolio/categories/apps.py
=================================================================
from django.apps import AppConfig


class CategoriesConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.categories'
    verbose_name = 'Categories'
=================================================================
FILE: ./media_portfolio/categories/models.py
=================================================================
from django.db import models
from media_portfolio.core.models import BaseModel


class Category(BaseModel):
    """
    Category for media items with type classification
    """
    CATEGORY_TYPES = [
        ('medium', 'Medium (Photography/Video/3D/Design)'),
        ('genre', 'Genre (Portrait/Landscape/Abstract/Street)'),
        ('technique', 'Technique (Digital/Film/Analog/Timelapse)'),
        ('subject', 'Subject (People/Nature/Architecture/Products)'),
        ('collection', 'Collection/Series'),
        ('client', 'Client Work'),
        ('personal', 'Personal Projects'),
    ]

    name = models.CharField(max_length=100)
    slug = models.SlugField(max_length=120, unique=True)
    category_type = models.CharField(max_length=20, choices=CATEGORY_TYPES)
    description = models.TextField(blank=True)
    
    # Visual representation
    cover_image = models.ImageField(
        upload_to='categories/covers/',
        blank=True,
        null=True,
        help_text="Cover image for this category"
    )
    icon = models.CharField(
        max_length=50,
        blank=True,
        help_text="Font Awesome icon class (e.g., 'fa-camera')"
    )
    
    # SEO
    meta_title = models.CharField(max_length=200, blank=True)
    meta_description = models.TextField(blank=True)
    
    # Parent-child relationship for nested categories
    parent = models.ForeignKey(
        'self',
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name='children'
    )

    class Meta:
        verbose_name = "Category"
        verbose_name_plural = "Categories"
        ordering = ['category_type', 'sort_order', 'name']

    def __str__(self):
        return f"{self.get_category_type_display()}: {self.name}"

    def save(self, *args, **kwargs):
        if not self.slug:
            from django.utils.text import slugify
            self.slug = slugify(self.name)
        super().save(*args, **kwargs)

    @property
    def media_count(self):
        """Get count of media items in this category"""
        return self.media_items.count()
=================================================================
FILE: ./media_portfolio/categories/views.py
=================================================================
from django.shortcuts import render, get_object_or_404
from django.views.generic import ListView, DetailView
from .models import Category
from media_portfolio.media.models import MediaItem
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger



class CategoryListView(ListView):
    """
    View for listing all categories grouped by type
    """
    model = Category
    template_name = 'categories/category_list.html'
    context_object_name = 'categories'

    def get_queryset(self):
        return Category.objects.filter(is_active=True).prefetch_related('media_items')


class CategoryDetailView(DetailView):
    """
    View for displaying a single category and its media
    """
    model = Category
    template_name = 'categories/category_detail.html'
    context_object_name = 'category'
    slug_field = 'slug'
    slug_url_kwarg = 'slug'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        category = self.object
        
        # Get media items in this category
        media_items = MediaItem.objects.filter(
            is_published=True,
            categories=category
        ).select_related().prefetch_related('categories')
        
        # Paginate
        paginator = Paginator(media_items, 12)
        page = self.request.GET.get('page')
        
        try:
            media_items = paginator.page(page)
        except PageNotAnInteger:
            media_items = paginator.page(1)
        except EmptyPage:
            media_items = paginator.page(paginator.num_pages)
        
        context['media_items'] = media_items
        context['is_paginated'] = media_items.has_other_pages()
        
        return context
=================================================================
FILE: ./media_portfolio/categories/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'categories'

urlpatterns = [
    path('', views.CategoryListView.as_view(), name='list'),
    path('<slug:slug>/', views.CategoryDetailView.as_view(), name='detail'),
]
=================================================================
FILE: ./media_portfolio/categories/forms.py
=================================================================
from django import forms
from .models import Category


class CategoryForm(forms.ModelForm):
    """
    Form for creating and editing categories
    """
    class Meta:
        model = Category
        fields = [
            'name', 'slug', 'category_type', 'parent', 'description',
            'cover_image', 'icon', 'meta_title', 'meta_description',
            'sort_order', 'is_active'
        ]
        widgets = {
            'name': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Enter category name'
            }),
            'slug': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'url-friendly-name'
            }),
            'category_type': forms.Select(attrs={
                'class': 'form-select'
            }),
            'parent': forms.Select(attrs={
                'class': 'form-select'
            }),
            'description': forms.Textarea(attrs={
                'class': 'form-control',
                'rows': 4,
                'placeholder': 'Describe this category...'
            }),
            'cover_image': forms.FileInput(attrs={
                'class': 'form-control',
                'accept': 'image/*'
            }),
            'icon': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'fa-camera'
            }),
            'meta_title': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'SEO title (optional)'
            }),
            'meta_description': forms.Textarea(attrs={
                'class': 'form-control',
                'rows': 3,
                'placeholder': 'SEO description (optional)'
            }),
            'sort_order': forms.NumberInput(attrs={
                'class': 'form-control',
                'min': '0'
            }),
            'is_active': forms.CheckboxInput(attrs={
                'class': 'form-check-input'
            }),
        }

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        
        # Make slug optional - will be auto-generated if not provided
        self.fields['slug'].required = False
        self.fields['slug'].help_text = "Leave blank to auto-generate from name"
        
        # Filter parent to only show categories of same type or no type restriction
        if self.instance and self.instance.pk:
            self.fields['parent'].queryset = Category.objects.filter(
                is_active=True
            ).exclude(pk=self.instance.pk)
        else:
            self.fields['parent'].queryset = Category.objects.filter(is_active=True)
        
        # Add help texts
        self.fields['icon'].help_text = "Font Awesome icon class (e.g., 'fa-camera', 'fa-video')"
        self.fields['category_type'].help_text = "Type of category for organization"
        self.fields['parent'].help_text = "Parent category (if this is a subcategory)"

    def clean_slug(self):
        """
        Ensure slug is unique
        """
        slug = self.cleaned_data.get('slug')
        name = self.cleaned_data.get('name')
        
        if not slug and name:
            from django.utils.text import slugify
            slug = slugify(name)
        
        if slug:
            # Check uniqueness
            qs = Category.objects.filter(slug=slug)
            if self.instance and self.instance.pk:
                qs = qs.exclude(pk=self.instance.pk)
            
            if qs.exists():
                raise forms.ValidationError("This slug is already in use. Please choose another.")
        
        return slug

    def clean(self):
        """
        Additional validation
        """
        cleaned_data = super().clean()
        category_type = cleaned_data.get('category_type')
        parent = cleaned_data.get('parent')
        
        # Prevent circular parent relationships
        if parent and self.instance and self.instance.pk:
            if parent.pk == self.instance.pk:
                self.add_error('parent', "A category cannot be its own parent")
            
            # Check if parent is actually a child of this category (circular)
            current_parent = parent
            while current_parent:
                if current_parent == self.instance:
                    self.add_error('parent', "Cannot create circular parent relationship")
                    break
                current_parent = current_parent.parent
        
        return cleaned_data


class CategoryFilterForm(forms.Form):
    """
    Form for filtering categories in list views
    """
    type = forms.ChoiceField(
        choices=[('', 'All Types')] + Category.CATEGORY_TYPES,
        required=False,
        widget=forms.Select(attrs={
            'class': 'form-select',
            'onchange': 'this.form.submit()'
        })
    )
    
    search = forms.CharField(
        required=False,
        widget=forms.TextInput(attrs={
            'class': 'form-control',
            'placeholder': 'Search categories...'
        })
    )
    
    active_only = forms.BooleanField(
        required=False,
        initial=True,
        widget=forms.CheckboxInput(attrs={
            'class': 'form-check-input',
            'onchange': 'this.form.submit()'
        })
    )


class CategoryBulkActionForm(forms.Form):
    """
    Form for bulk actions on categories (admin)
    """
    ACTION_CHOICES = [
        ('activate', 'Activate selected'),
        ('deactivate', 'Deactivate selected'),
        ('delete', 'Delete selected'),
        ('change_type', 'Change category type'),
        ('move_to_parent', 'Move to parent category'),
    ]
    
    action = forms.ChoiceField(
        choices=ACTION_CHOICES,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    new_type = forms.ChoiceField(
        choices=Category.CATEGORY_TYPES,
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    new_parent = forms.ModelChoiceField(
        queryset=Category.objects.filter(is_active=True),
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    def clean(self):
        cleaned_data = super().clean()
        action = cleaned_data.get('action')
        
        if action == 'change_type' and not cleaned_data.get('new_type'):
            self.add_error('new_type', 'New type is required for change type action')
        
        if action == 'move_to_parent' and not cleaned_data.get('new_parent'):
            self.add_error('new_parent', 'New parent is required for move action')
        
        return cleaned_data
=================================================================
FILE: ./media_portfolio/comments/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/comments/admin.py
=================================================================
from django.contrib import admin
from .models import Comment, Testimonial


@admin.register(Comment)
class CommentAdmin(admin.ModelAdmin):
    list_display = ['name', 'email', 'media_item', 'is_approved', 'is_featured', 'created_at']
    list_filter = ['is_approved', 'is_spam', 'is_featured', 'created_at']
    search_fields = ['name', 'email', 'content']
    readonly_fields = ['ip_address', 'user_agent', 'created_at', 'updated_at']  # Added updated_at here
    
    fieldsets = (
        ('Comment', {
            'fields': ('media_item', 'parent', 'name', 'email', 'website', 'content')
        }),
        ('Moderation', {
            'fields': ('is_approved', 'is_spam', 'is_featured', 'can_use_as_testimonial', 'testimonial_approved')
        }),
        ('Technical', {
            'fields': ('ip_address', 'user_agent', 'created_at', 'updated_at'),
            'classes': ('collapse',)
        }),
    )
    
    actions = ['approve_comments', 'mark_as_spam', 'feature_comments']
    
    def approve_comments(self, request, queryset):
        queryset.update(is_approved=True)
    approve_comments.short_description = "Approve selected comments"
    
    def mark_as_spam(self, request, queryset):
        queryset.update(is_spam=True, is_approved=False)
    mark_as_spam.short_description = "Mark selected as spam"
    
    def feature_comments(self, request, queryset):
        queryset.update(is_featured=True)
    feature_comments.short_description = "Feature selected comments"


@admin.register(Testimonial)
class TestimonialAdmin(admin.ModelAdmin):
    list_display = ['name', 'company', 'rating', 'featured', 'created_at']
    list_filter = ['rating', 'featured']
    search_fields = ['name', 'company', 'content']
    
    fieldsets = (
        ('Testimonial', {
            'fields': ('name', 'title', 'company', 'content', 'rating')
        }),
        ('Source', {
            'fields': ('source_comment', 'photo')
        }),
        ('Display', {
            'fields': ('featured', 'sort_order')
        }),
    )
=================================================================
FILE: ./media_portfolio/comments/apps.py
=================================================================
from django.apps import AppConfig


class CommentsConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.comments'
    verbose_name = 'Comments'
=================================================================
FILE: ./media_portfolio/comments/models.py
=================================================================
from django.db import models
from django.core.validators import EmailValidator
from media_portfolio.core.models import BaseModel
from media_portfolio.media.models import MediaItem


class Comment(BaseModel):
    """
    Model for comments on media items with threading support
    """
    media_item = models.ForeignKey(
        MediaItem,
        on_delete=models.CASCADE,
        related_name='comments'
    )
    
    parent = models.ForeignKey(
        'self',
        null=True,
        blank=True,
        on_delete=models.CASCADE,
        related_name='replies'
    )
    
    # Commenter info
    name = models.CharField(max_length=100)
    email = models.EmailField(validators=[EmailValidator()])
    website = models.URLField(blank=True, help_text="Optional: Your website or portfolio")
    
    # Comment content
    content = models.TextField()
    
    # Moderation
    is_approved = models.BooleanField(
        default=False,
        help_text="Approve for public display"
    )
    is_spam = models.BooleanField(default=False)
    is_featured = models.BooleanField(
        default=False,
        help_text="Feature this comment as a testimonial"
    )
    
    # Tracking
    ip_address = models.GenericIPAddressField(null=True, blank=True)
    user_agent = models.TextField(blank=True)
    
    # For testimonials
    can_use_as_testimonial = models.BooleanField(
        default=False,
        help_text="Can I feature this comment on my site?"
    )
    testimonial_approved = models.BooleanField(
        default=False,
        help_text="Approved to use as testimonial"
    )

    class Meta:
        verbose_name = "Comment"
        verbose_name_plural = "Comments"
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['media_item', 'is_approved']),
            models.Index(fields=['is_featured']),
        ]

    def __str__(self):
        return f"Comment by {self.name} on {self.media_item.title}"

    def get_replies(self):
        """Get all approved replies to this comment"""
        return self.replies.filter(is_approved=True)


class Testimonial(BaseModel):
    """
    Featured testimonials (can be from comments or standalone)
    """
    name = models.CharField(max_length=100)
    title = models.CharField(max_length=200, blank=True, help_text="e.g., Client, Art Director")
    company = models.CharField(max_length=200, blank=True)
    
    # Optional link to original comment
    source_comment = models.OneToOneField(
        Comment,
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name='testimonial'
    )
    
    # Testimonial content
    content = models.TextField()
    
    # Optional photo
    photo = models.ImageField(
        upload_to='testimonials/',
        blank=True,
        null=True
    )
    
    # Display
    rating = models.IntegerField(
        choices=[(i, i) for i in range(1, 6)],
        default=5,
        help_text="Rating out of 5"
    )
    featured = models.BooleanField(default=True)

    class Meta:
        verbose_name = "Testimonial"
        verbose_name_plural = "Testimonials"

    def __str__(self):
        return f"Testimonial from {self.name}"
=================================================================
FILE: ./media_portfolio/comments/views.py
=================================================================
from django.shortcuts import render, get_object_or_404, redirect
from django.views.generic import View
from django.contrib import messages
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.utils.decorators import method_decorator
from .models import Comment
from .forms import CommentForm
from media_portfolio.media.models import MediaItem


class AddCommentView(View):
    """
    View for adding a comment to a media item
    """
    
    def post(self, request, media_id):
        media_item = get_object_or_404(MediaItem, id=media_id, is_published=True)
        
        form = CommentForm(request.POST)
        if form.is_valid():
            comment = form.save(commit=False)
            comment.media_item = media_item
            
            # Set parent if this is a reply
            parent_id = request.POST.get('parent_id')
            if parent_id:
                try:
                    comment.parent = Comment.objects.get(id=parent_id)
                except Comment.DoesNotExist:
                    pass
            
            # Capture IP and user agent
            x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
            if x_forwarded_for:
                comment.ip_address = x_forwarded_for.split(',')[0]
            else:
                comment.ip_address = request.META.get('REMOTE_ADDR')
            
            comment.user_agent = request.META.get('HTTP_USER_AGENT', '')
            
            comment.save()
            
            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
                return JsonResponse({
                    'success': True,
                    'message': 'Comment submitted successfully and awaiting moderation.',
                    'comment': {
                        'name': comment.name,
                        'content': comment.content,
                        'created_at': comment.created_at.strftime('%B %d, %Y'),
                    }
                })
            else:
                messages.success(request, 'Your comment has been submitted and is awaiting moderation.')
                return redirect('media:detail', slug=media_item.slug)
        else:
            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
                return JsonResponse({
                    'success': False,
                    'errors': form.errors
                }, status=400)
            else:
                for field, errors in form.errors.items():
                    for error in errors:
                        messages.error(request, f"{field}: {error}")
                return redirect('media:detail', slug=media_item.slug)


class LoadCommentsView(View):
    """
    View for loading comments via AJAX
    """
    
    def get(self, request, media_id):
        media_item = get_object_or_404(MediaItem, id=media_id)
        
        # Get approved comments
        comments = Comment.objects.filter(
            media_item=media_item,
            is_approved=True,
            parent=None
        ).prefetch_related('replies')
        
        # Paginate if needed
        page = int(request.GET.get('page', 1))
        per_page = 10
        start = (page - 1) * per_page
        end = start + per_page
        
        comments_page = comments[start:end]
        has_next = comments.count() > end
        
        # Render comments HTML
        from django.template.loader import render_to_string
        html = render_to_string('comments/comment_list_items.html', {
            'comments': comments_page
        })
        
        return JsonResponse({
            'success': True,
            'html': html,
            'has_next': has_next,
            'next_page': page + 1 if has_next else None
        })


class ModerateCommentView(View):
    """
    View for comment moderation (admin only)
    """
    
    def post(self, request, comment_id):
        if not request.user.is_staff:
            return JsonResponse({'error': 'Unauthorized'}, status=403)
        
        comment = get_object_or_404(Comment, id=comment_id)
        action = request.POST.get('action')
        
        if action == 'approve':
            comment.is_approved = True
            comment.save()
            return JsonResponse({'success': True, 'message': 'Comment approved'})
        
        elif action == 'reject':
            comment.is_approved = False
            comment.save()
            return JsonResponse({'success': True, 'message': 'Comment rejected'})
        
        elif action == 'spam':
            comment.is_spam = True
            comment.is_approved = False
            comment.save()
            return JsonResponse({'success': True, 'message': 'Comment marked as spam'})
        
        elif action == 'feature':
            comment.is_featured = True
            comment.save()
            return JsonResponse({'success': True, 'message': 'Comment featured'})
        
        return JsonResponse({'error': 'Invalid action'}, status=400)
=================================================================
FILE: ./media_portfolio/comments/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'comments'

urlpatterns = [
    path('add/<int:media_id>/', views.AddCommentView.as_view(), name='add'),
    path('load/<int:media_id>/', views.LoadCommentsView.as_view(), name='load'),
    path('moderate/<int:comment_id>/', views.ModerateCommentView.as_view(), name='moderate'),
]
=================================================================
FILE: ./media_portfolio/comments/forms.py
=================================================================
from django import forms
from .models import Comment


class CommentForm(forms.ModelForm):
    """
    Form for submitting comments
    """
    class Meta:
        model = Comment
        fields = ['name', 'email', 'website', 'content', 'can_use_as_testimonial']
        widgets = {
            'content': forms.Textarea(attrs={
                'rows': 4,
                'class': 'form-control',
                'placeholder': 'Share your thoughts...'
            }),
            'name': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Your name'
            }),
            'email': forms.EmailInput(attrs={
                'class': 'form-control',
                'placeholder': 'your@email.com'
            }),
            'website': forms.URLInput(attrs={
                'class': 'form-control',
                'placeholder': 'https://yourwebsite.com (optional)'
            }),
            'can_use_as_testimonial': forms.CheckboxInput(attrs={
                'class': 'form-check-input'
            }),
        }

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.fields['website'].required = False
=================================================================
FILE: ./media_portfolio/inquiries/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/inquiries/admin.py
=================================================================
from django.contrib import admin
from django.utils import timezone
from .models import Inquiry


@admin.register(Inquiry)
class InquiryAdmin(admin.ModelAdmin):
    list_display = ['name', 'email', 'inquiry_type', 'subject', 'status', 'created_at']
    list_filter = ['inquiry_type', 'status', 'created_at']
    search_fields = ['name', 'email', 'subject', 'message']
    readonly_fields = ['ip_address', 'created_at', 'responded_at']
    
    fieldsets = (
        ('Inquiry Details', {
            'fields': ('inquiry_type', 'media_item', 'subject', 'message')
        }),
        ('Contact Information', {
            'fields': ('name', 'email', 'phone', 'company')
        }),
        ('Additional Information', {
            'fields': ('usage_type', 'deadline', 'budget_range'),
            'classes': ('collapse',)
        }),
        ('Status', {
            'fields': ('status', 'responded_at', 'response_notes')
        }),
        ('Legal', {
            'fields': ('accepted_terms', 'accepted_privacy')
        }),
        ('Technical', {
            'fields': ('ip_address', 'created_at', 'updated_at'),
            'classes': ('collapse',)
        }),
    )
    
    actions = ['mark_as_read', 'mark_as_replied', 'mark_as_archived']
    
    def mark_as_read(self, request, queryset):
        queryset.update(status='read')
    mark_as_read.short_description = "Mark selected as read"
    
    def mark_as_replied(self, request, queryset):
        queryset.update(status='replied', responded_at=timezone.now())
    mark_as_replied.short_description = "Mark selected as replied"
    
    def mark_as_archived(self, request, queryset):
        queryset.update(status='archived')
    mark_as_archived.short_description = "Archive selected"
=================================================================
FILE: ./media_portfolio/inquiries/apps.py
=================================================================
from django.apps import AppConfig


class InquiriesConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.inquiries'
    verbose_name = 'Inquiries'
=================================================================
FILE: ./media_portfolio/inquiries/models.py
=================================================================
from django.db import models
from django.core.validators import EmailValidator
from media_portfolio.core.models import BaseModel
from media_portfolio.media.models import MediaItem


class Inquiry(BaseModel):
    """
    Model for client inquiries and messages
    """
    INQUIRY_TYPES = [
        ('general', 'General Question'),
        ('license', 'Licensing Request'),
        ('print', 'Print Purchase'),
        ('commission', 'Commission Work'),
        ('collaboration', 'Collaboration'),
        ('interview', 'Interview Request'),
        ('workshop', 'Workshop/Teaching'),
        ('other', 'Other'),
    ]
    
    STATUS_CHOICES = [
        ('new', 'New'),
        ('read', 'Read'),
        ('replied', 'Replied'),
        ('in_progress', 'In Progress'),
        ('completed', 'Completed'),
        ('archived', 'Archived'),
    ]
    
    # Inquiry type
    inquiry_type = models.CharField(max_length=20, choices=INQUIRY_TYPES)
    
    # Related media (if inquiring about specific work)
    media_item = models.ForeignKey(
        MediaItem,
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name='inquiries'
    )
    
    # Contact info
    name = models.CharField(max_length=100)
    email = models.EmailField(validators=[EmailValidator()])
    phone = models.CharField(max_length=20, blank=True)
    company = models.CharField(max_length=200, blank=True)
    
    # Subject and message
    subject = models.CharField(max_length=200)
    message = models.TextField()
    
    # Additional details based on inquiry type
    usage_type = models.CharField(
        max_length=200,
        blank=True,
        help_text="How will the media be used? (for licensing)"
    )
    deadline = models.DateField(
        null=True,
        blank=True,
        help_text="Project deadline"
    )
    budget_range = models.CharField(
        max_length=100,
        blank=True,
        help_text="Budget range for the project"
    )
    
    # Tracking
    status = models.CharField(
        max_length=20,
        choices=STATUS_CHOICES,
        default='new'
    )
    ip_address = models.GenericIPAddressField(null=True, blank=True)
    
    # Response tracking
    responded_at = models.DateTimeField(null=True, blank=True)
    response_notes = models.TextField(blank=True, help_text="Internal notes about response")
    
    # Legal consent
    accepted_terms = models.BooleanField(default=False)
    accepted_privacy = models.BooleanField(default=False)
    
    class Meta:
        verbose_name = "Inquiry"
        verbose_name_plural = "Inquiries"
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['status', '-created_at']),
            models.Index(fields=['inquiry_type', 'status']),
        ]

    def __str__(self):
        return f"{self.get_inquiry_type_display()}: {self.subject} - {self.name}"
=================================================================
FILE: ./media_portfolio/inquiries/views.py
=================================================================
from django.shortcuts import render, redirect
from django.views.generic import FormView, TemplateView
from django.contrib import messages
from django.core.mail import send_mail
from django.conf import settings
from .forms import InquiryForm


class ContactView(FormView):
    """
    View for contact/inquiry form
    """
    template_name = 'inquiries/contact.html'
    form_class = InquiryForm
    success_url = '/inquiries/success/'

    def form_valid(self, form):
        # Save the inquiry
        inquiry = form.save(commit=False)
        
        # Capture IP address
        x_forwarded_for = self.request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            inquiry.ip_address = x_forwarded_for.split(',')[0]
        else:
            inquiry.ip_address = self.request.META.get('REMOTE_ADDR')
        
        inquiry.save()
        
        # Send email notification
        self.send_notification_email(inquiry)
        
        # Show success message
        messages.success(self.request, 'Thank you for your message. I will get back to you soon!')
        
        return super().form_valid(form)

    def send_notification_email(self, inquiry):
        """
        Send email notification about new inquiry
        """
        subject = f'New Inquiry: {inquiry.subject}'
        message = f"""
        New inquiry received:
        
        Type: {inquiry.get_inquiry_type_display()}
        Name: {inquiry.name}
        Email: {inquiry.email}
        Phone: {inquiry.phone}
        
        Message:
        {inquiry.message}
        
        View in admin: {settings.BASE_URL}/admin/inquiries/inquiry/{inquiry.id}/
        """
        
        try:
            send_mail(
                subject,
                message,
                settings.DEFAULT_FROM_EMAIL,
                [settings.ADMIN_EMAIL],
                fail_silently=True,
            )
        except:
            pass  # Fail silently in development


class SuccessView(TemplateView):
    """
    View for successful form submission
    """
    template_name = 'inquiries/success.html'
=================================================================
FILE: ./media_portfolio/inquiries/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'inquiries'

urlpatterns = [
    path('contact/', views.ContactView.as_view(), name='contact'),
    path('success/', views.SuccessView.as_view(), name='success'),
]
=================================================================
FILE: ./media_portfolio/inquiries/forms.py
=================================================================
from django import forms
from .models import Inquiry
from ..media.models import MediaItem


class InquiryForm(forms.ModelForm):
    """
    Form for client inquiries
    """
    media_item = forms.ModelChoiceField(
        queryset=MediaItem.objects.filter(is_published=True),
        required=False,
        empty_label="Select a specific piece (optional)",
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    class Meta:
        model = Inquiry
        fields = [
            'inquiry_type', 'media_item', 'name', 'email', 'phone',
            'company', 'subject', 'message', 'usage_type', 'deadline',
            'budget_range', 'accepted_terms', 'accepted_privacy'
        ]
        widgets = {
            'inquiry_type': forms.Select(attrs={'class': 'form-select'}),
            'name': forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'Your full name'}),
            'email': forms.EmailInput(attrs={'class': 'form-control', 'placeholder': 'your@email.com'}),
            'phone': forms.TextInput(attrs={'class': 'form-control', 'placeholder': '+1 234 567 8900'}),
            'company': forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'Company/Organization (optional)'}),
            'subject': forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'What is this regarding?'}),
            'message': forms.Textarea(attrs={
                'class': 'form-control',
                'rows': 6,
                'placeholder': 'Please provide details about your inquiry...'
            }),
            'usage_type': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'e.g., Website, Print, Exhibition'
            }),
            'deadline': forms.DateInput(attrs={
                'class': 'form-control',
                'type': 'date'
            }),
            'budget_range': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'e.g., $500-$1000'
            }),
            'accepted_terms': forms.CheckboxInput(attrs={'class': 'form-check-input'}),
            'accepted_privacy': forms.CheckboxInput(attrs={'class': 'form-check-input'}),
        }

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # Make optional fields clear
        self.fields['phone'].required = False
        self.fields['company'].required = False
        self.fields['usage_type'].required = False
        self.fields['deadline'].required = False
        self.fields['budget_range'].required = False

    def clean(self):
        cleaned_data = super().clean()
        inquiry_type = cleaned_data.get('inquiry_type')
        
        # Validate based on inquiry type
        if inquiry_type in ['license', 'print'] and not cleaned_data.get('media_item'):
            self.add_error('media_item', 'Please select the media item for licensing/print inquiry')
        
        if inquiry_type == 'commission' and not cleaned_data.get('budget_range'):
            self.add_error('budget_range', 'Please provide a budget range for commission work')
        
        # Validate legal acceptance
        if not cleaned_data.get('accepted_terms'):
            self.add_error('accepted_terms', 'You must accept the terms and conditions')
        
        if not cleaned_data.get('accepted_privacy'):
            self.add_error('accepted_privacy', 'You must accept the privacy policy')
        
        return cleaned_data
=================================================================
FILE: ./media_portfolio/collections/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/collections/admin.py
=================================================================
from django.contrib import admin
from django.utils.html import format_html
from .models import Collection, CollectionItem


class CollectionItemInline(admin.TabularInline):
    model = CollectionItem
    extra = 5
    ordering = ['order']
    fields = ['media_item', 'order', 'custom_caption']
    autocomplete_fields = ['media_item']


@admin.register(Collection)
class CollectionAdmin(admin.ModelAdmin):
    list_display = ['title', 'collection_type', 'featured', 'is_published', 'media_count', 'created_at']
    list_filter = ['collection_type', 'featured', 'is_published', 'layout']
    search_fields = ['title', 'description']
    prepopulated_fields = {'slug': ('title',)}
    inlines = [CollectionItemInline]
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('title', 'slug', 'collection_type', 'description')
        }),
        ('Media', {
            'fields': ('cover_image',)
        }),
        ('Display', {
            'fields': ('layout', 'featured', 'is_published', 'published_date', 'sort_order')
        }),
        ('SEO', {
            'fields': ('meta_title', 'meta_description'),
            'classes': ('collapse',)
        }),
    )
    
    def media_count(self, obj):
        return obj.media_items.count()
    media_count.short_description = 'Items'
    
    def cover_preview(self, obj):
        if obj.cover_image:
            return format_html(
                '<img src="{}" style="max-height: 50px; max-width: 50px;" />',
                obj.cover_image.url
            )
        return "No cover"
    cover_preview.short_description = 'Cover'
=================================================================
FILE: ./media_portfolio/collections/apps.py
=================================================================

=================================================================
FILE: ./media_portfolio/collections/models.py
=================================================================
from django.db import models
from django.utils import timezone
from media_portfolio.core.models import BaseModel
from media_portfolio.media.models import MediaItem


class Collection(BaseModel):
    """
    Model for grouping media items into collections/series
    """
    COLLECTION_TYPES = [
        ('series', 'Series'),
        ('exhibition', 'Exhibition'),
        ('project', 'Project'),
        ('client', 'Client Work'),
        ('personal', 'Personal'),
        ('award', 'Award Winning'),
    ]
    
    LAYOUT_CHOICES = [
        ('grid', 'Grid'),
        ('masonry', 'Masonry'),
        ('slideshow', 'Slideshow'),
        ('carousel', 'Carousel'),
    ]
    
    title = models.CharField(max_length=200)
    slug = models.SlugField(max_length=250, unique=True)
    collection_type = models.CharField(max_length=20, choices=COLLECTION_TYPES, default='series')
    description = models.TextField(blank=True)
    
    # Visual representation
    cover_image = models.ImageField(
        upload_to='collections/covers/',
        blank=True,
        null=True,
        help_text="Cover image for the collection"
    )
    
    # Media items in this collection
    media_items = models.ManyToManyField(
        MediaItem,
        through='CollectionItem',
        related_name='collections',
        blank=True
    )
    
    # Display options
    layout = models.CharField(
        max_length=20,
        choices=LAYOUT_CHOICES,
        default='grid'
    )
    is_published = models.BooleanField(default=True)
    published_date = models.DateTimeField(default=timezone.now)
    
    # SEO
    meta_title = models.CharField(max_length=200, blank=True)
    meta_description = models.TextField(blank=True)
    
    # Featured
    featured = models.BooleanField(default=False)
    
    class Meta:
        verbose_name = "Collection"
        verbose_name_plural = "Collections"
        ordering = ['-featured', '-published_date']

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        if not self.slug:
            from django.utils.text import slugify
            self.slug = slugify(self.title)
        super().save(*args, **kwargs)

    def get_absolute_url(self):
        from django.urls import reverse
        return reverse('collections:detail', args=[self.slug])


class CollectionItem(models.Model):
    """
    Through model for collection items with ordering and custom captions
    """
    collection = models.ForeignKey(Collection, on_delete=models.CASCADE)
    media_item = models.ForeignKey(MediaItem, on_delete=models.CASCADE)
    order = models.IntegerField(default=0)
    custom_caption = models.TextField(blank=True, help_text="Override the media item's caption for this collection")
    
    class Meta:
        ordering = ['order']
        unique_together = ['collection', 'media_item']

    def __str__(self):
        return f"{self.collection.title} - {self.media_item.title}"
=================================================================
FILE: ./media_portfolio/collections/views.py
=================================================================
from django.shortcuts import render, get_object_or_404
from django.views.generic import ListView, DetailView
from django.core.paginator import Paginator
from .models import Collection


class CollectionListView(ListView):
    """
    View for listing all collections
    """
    model = Collection
    template_name = 'collections/collection_list.html'
    context_object_name = 'collections'
    paginate_by = 12

    def get_queryset(self):
        return Collection.objects.filter(
            is_published=True
        ).prefetch_related('media_items')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Group collections by type for filtering
        collection_types = Collection.objects.filter(
            is_published=True
        ).values_list('collection_type', flat=True).distinct()
        
        context['collection_types'] = [(t, dict(Collection.COLLECTION_TYPES).get(t, t)) 
                                       for t in collection_types]
        
        # Featured collections
        context['featured_collections'] = Collection.objects.filter(
            is_published=True,
            featured=True
        )[:3]
        
        return context


class CollectionDetailView(DetailView):
    """
    View for displaying a single collection
    """
    model = Collection
    template_name = 'collections/collection_detail.html'
    context_object_name = 'collection'
    slug_field = 'slug'
    slug_url_kwarg = 'slug'

    def get_queryset(self):
        return Collection.objects.filter(
            is_published=True
        ).prefetch_related('media_items')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Get collection items with ordering
        collection_items = self.object.collectionitem_set.select_related(
            'media_item'
        ).order_by('order')
        
        context['collection_items'] = collection_items
        
        # Related collections (same type)
        context['related_collections'] = Collection.objects.filter(
            is_published=True,
            collection_type=self.object.collection_type
        ).exclude(
            id=self.object.id
        )[:3]
        
        return context
=================================================================
FILE: ./media_portfolio/collections/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'collections'

urlpatterns = [
    path('', views.CollectionListView.as_view(), name='list'),
    path('<slug:slug>/', views.CollectionDetailView.as_view(), name='detail'),
]
=================================================================
FILE: ./media_portfolio/collections/forms.py
=================================================================
(empty or not found)

=================================================================
FILE: ./media_portfolio/projects/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/projects/admin.py
=================================================================
from django.contrib import admin

# Register your models here.
from django.contrib import admin
from django.utils.html import format_html
from .models import Project, ProjectLike, ProjectComment


class ProjectLikeInline(admin.TabularInline):
    model = ProjectLike
    extra = 0
    readonly_fields = ['session_key', 'ip_address', 'created_at']
    can_delete = False
    
    def has_add_permission(self, request, obj=None):
        return False


class ProjectCommentInline(admin.TabularInline):
    model = ProjectComment
    extra = 0
    readonly_fields = ['name', 'email', 'content', 'created_at']
    fields = ['name', 'content', 'is_approved', 'created_at']


@admin.register(Project)
class ProjectAdmin(admin.ModelAdmin):
    list_display = [
        'title', 'difficulty_level', 'is_featured', 'is_published',
        'stars_count', 'view_count', 'thumbnail_preview'
    ]
    list_filter = [
        'difficulty_level', 'is_featured', 'is_published', 'license',
        'categories', 'created_at'
    ]
    search_fields = ['title', 'short_summary', 'description', 'tags']
    prepopulated_fields = {'slug': ('title',)}
    readonly_fields = [
        'stars_count', 'forks_count', 'last_github_sync', 'view_count',
        'thumbnail_preview', 'thumbnail_webp_preview', 'thumbnail_blur_preview'
    ]
    inlines = [ProjectLikeInline, ProjectCommentInline]
    
    fieldsets = (
        ('Basic Information', {
            'fields': (
                'title', 'slug', 'short_summary', 'description',
                'difficulty_level', 'is_featured', 'performance_score'
            )
        }),
        ('Project Details', {
            'fields': ('problem_statement', 'solution'),
            'classes': ('wide',)
        }),
        ('Technical Stack', {
            'fields': ('technical_stack', 'api_integrations', 'tags'),
            'classes': ('wide',)
        }),
        ('Media', {
            'fields': (
                'thumbnail', 'thumbnail_preview',
                'thumbnail_webp', 'thumbnail_webp_preview',
                'thumbnail_blur', 'thumbnail_blur_preview'
            )
        }),
        ('Links', {
            'fields': ('github_url', 'live_demo_url', 'documentation_url')
        }),
        ('Organization', {
            'fields': ('categories', 'is_published', 'published_date', 'sort_order')
        }),
        ('GitHub Stats', {
            'fields': ('stars_count', 'forks_count', 'last_github_sync'),
            'classes': ('collapse',)
        }),
        ('Statistics', {
            'fields': ('view_count',),
            'classes': ('collapse',)
        }),
        ('Copyright', {
            'fields': ('copyright_notice', 'license')
        }),
    )
    
    actions = ['mark_as_featured', 'mark_as_not_featured']
    
    def thumbnail_preview(self, obj):
        if obj.thumbnail:
            return format_html(
                '<img src="{}" style="max-height: 100px; max-width: 100px;" />',
                obj.thumbnail.url
            )
        return "No thumbnail"
    thumbnail_preview.short_description = 'Thumbnail Preview'
    
    def thumbnail_webp_preview(self, obj):
        if obj.thumbnail_webp:
            return format_html(
                '<img src="{}" style="max-height: 100px; max-width: 100px;" />',
                obj.thumbnail_webp.url
            )
        return "Not generated"
    thumbnail_webp_preview.short_description = 'WebP Preview'
    
    def thumbnail_blur_preview(self, obj):
        if obj.thumbnail_blur:
            return format_html(
                '<img src="{}" style="max-height: 100px; max-width: 100px;" />',
                obj.thumbnail_blur.url
            )
        return "Not generated"
    thumbnail_blur_preview.short_description = 'Blur Preview'
    
    def mark_as_featured(self, request, queryset):
        queryset.update(is_featured=True)
    mark_as_featured.short_description = "Mark selected as featured"
    
    def mark_as_not_featured(self, request, queryset):
        queryset.update(is_featured=False)
    mark_as_not_featured.short_description = "Mark selected as not featured"


@admin.register(ProjectComment)
class ProjectCommentAdmin(admin.ModelAdmin):
    list_display = ['name', 'email', 'project', 'is_approved', 'created_at']
    list_filter = ['is_approved', 'is_spam', 'created_at']
    search_fields = ['name', 'email', 'content']
    readonly_fields = ['ip_address', 'user_agent', 'created_at']
    
    actions = ['approve_comments', 'mark_as_spam']
    
    def approve_comments(self, request, queryset):
        queryset.update(is_approved=True)
    approve_comments.short_description = "Approve selected comments"
    
    def mark_as_spam(self, request, queryset):
        queryset.update(is_spam=True, is_approved=False)
    mark_as_spam.short_description = "Mark selected as spam"


@admin.register(ProjectLike)
class ProjectLikeAdmin(admin.ModelAdmin):
    list_display = ['project', 'session_key', 'ip_address', 'created_at']
    list_filter = ['created_at']
    search_fields = ['project__title', 'session_key', 'ip_address']
    readonly_fields = ['project', 'session_key', 'ip_address', 'user_agent', 'created_at']
    
    def has_add_permission(self, request):
        return False
    
    def has_change_permission(self, request, obj=None):
        return False
=================================================================
FILE: ./media_portfolio/projects/apps.py
=================================================================
from django.apps import AppConfig


class ProjectsConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.projects'
    verbose_name = 'Projects Portfolio'

    def ready(self):
        import media_portfolio.projects.signals
=================================================================
FILE: ./media_portfolio/projects/models.py
=================================================================
import os
from django.db import models
from django.utils import timezone
from django.utils.text import slugify
from django.core.validators import FileExtensionValidator, MinValueValidator, MaxValueValidator
from media_portfolio.core.models import BaseModel
from media_portfolio.categories.models import Category


def project_thumbnail_path(instance, filename):
    """Generate upload path for project thumbnails"""
    ext = filename.split('.')[-1].lower()
    timestamp = timezone.now().strftime('%Y%m%d_%H%M%S')
    return f'projects/thumbnails/{instance.slug}_{timestamp}.{ext}'


class Project(BaseModel):
    """
    Enhanced Project model for portfolio with comprehensive fields
    """
    DIFFICULTY_LEVELS = [
        ('beginner', 'Beginner'),
        ('intermediate', 'Intermediate'),
        ('advanced', 'Advanced'),
        ('expert', 'Expert'),
    ]

    # Basic Information
    title = models.CharField(max_length=200, help_text="The catchy name of the project")
    slug = models.SlugField(max_length=250, unique=True, help_text="SEO-friendly URL")
    short_summary = models.CharField(
        max_length=300,
        help_text="1-2 sentence 'elevator pitch' for quick scanning"
    )
    description = models.TextField(blank=True, help_text="Full project description")
    
    # Project Details
    problem_statement = models.TextField(
        blank=True,
        help_text="The 'Why'—what specific problem were you trying to solve?"
    )
    solution = models.TextField(
        blank=True,
        help_text="The 'How'—details on your architecture and logic"
    )
    
    # Technical Information
    technical_stack = models.JSONField(
        default=list,
        blank=True,
        help_text='List of languages and frameworks (e.g., ["Python", "React", "Django"])'
    )
    api_integrations = models.JSONField(
        default=list,
        blank=True,
        help_text='External services used (e.g., ["Stripe", "OpenAI", "Twilio"])'
    )
    
    # Media
    thumbnail = models.ImageField(
        upload_to=project_thumbnail_path,
        help_text="High-quality screenshot of the UI"
    )
    thumbnail_webp = models.ImageField(
        upload_to='projects/thumbnails/webp/',
        blank=True,
        null=True,
        help_text="Optimized WebP version"
    )
    thumbnail_blur = models.ImageField(
        upload_to='projects/thumbnails/blur/',
        blank=True,
        null=True,
        help_text="Blurred placeholder for lazy loading"
    )
    
    # Links
    github_url = models.URLField(
        blank=True,
        help_text="Link to the repository for code review"
    )
    live_demo_url = models.URLField(
        blank=True,
        help_text="Hosted version of the site"
    )
    documentation_url = models.URLField(
        blank=True,
        help_text="Link to project documentation"
    )
    
    # Categories and Organization
    categories = models.ManyToManyField(
        Category,
        related_name='projects',
        blank=True,
        help_text="Project categories"
    )
    tags = models.CharField(
        max_length=500,
        blank=True,
        help_text="Comma-separated tags"
    )
    
    # Difficulty and Highlighting
    difficulty_level = models.CharField(
        max_length=20,
        choices=DIFFICULTY_LEVELS,
        default='intermediate',
        help_text="Helps recruiters see your growth from Basic to Advanced"
    )
    is_featured = models.BooleanField(
        default=False,
        help_text="Highlight this project at the top of the UI"
    )
    performance_score = models.IntegerField(
        default=0,
        validators=[MinValueValidator(0), MaxValueValidator(100)],
        help_text="Lighthouse performance metric"
    )
    
    # Stats
    stars_count = models.IntegerField(
        default=0,
        help_text="GitHub stars count (auto-updated)"
    )
    forks_count = models.IntegerField(
        default=0,
        help_text="GitHub forks count (auto-updated)"
    )
    last_github_sync = models.DateTimeField(
        null=True,
        blank=True,
        help_text="Last time GitHub stats were synced"
    )
    
    # Display Control
    is_published = models.BooleanField(default=True)
    published_date = models.DateTimeField(default=timezone.now)
    view_count = models.IntegerField(default=0, editable=False)
    
    # Copyright
    copyright_notice = models.CharField(
        max_length=200,
        default="© All Rights Reserved"
    )
    license = models.CharField(
        max_length=20,
        choices=[
            ('copyright', 'All Rights Reserved'),
            ('mit', 'MIT License'),
            ('apache', 'Apache License 2.0'),
            ('gpl', 'GNU GPL v3'),
            ('bsd', 'BSD License'),
            ('public', 'Public Domain'),
        ],
        default='copyright'
    )

    class Meta:
        verbose_name = "Project"
        verbose_name_plural = "Projects"
        ordering = ['-is_featured', '-performance_score', '-published_date']
        indexes = [
            models.Index(fields=['difficulty_level', 'is_published']),
            models.Index(fields=['-stars_count']),
            models.Index(fields=['-published_date']),
        ]

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        # Auto-generate slug if not provided
        if not self.slug:
            self.slug = slugify(self.title)
        
        # Ensure unique slug
        original_slug = self.slug
        counter = 1
        while Project.objects.filter(slug=self.slug).exclude(pk=self.pk).exists():
            self.slug = f"{original_slug}-{counter}"
            counter += 1
        
        super().save(*args, **kwargs)

    def get_absolute_url(self):
        from django.urls import reverse
        return reverse('projects:detail', args=[self.slug])

    @property
    def tag_list(self):
        """Return tags as list"""
        if self.tags:
            return [tag.strip() for tag in self.tags.split(',') if tag.strip()]
        return []

    def increment_view_count(self):
        """Increment view count"""
        self.view_count += 1
        self.save(update_fields=['view_count'])


class ProjectLike(BaseModel):
    """
    Model for tracking project likes
    """
    project = models.ForeignKey(
        Project,
        on_delete=models.CASCADE,
        related_name='likes'
    )
    session_key = models.CharField(max_length=40, blank=True, null=True)
    ip_address = models.GenericIPAddressField(null=True, blank=True)
    user_agent = models.TextField(blank=True)

    class Meta:
        verbose_name = "Project Like"
        verbose_name_plural = "Project Likes"
        unique_together = ['project', 'session_key']
        indexes = [
            models.Index(fields=['project', 'session_key']),
        ]

    def __str__(self):
        return f"Like for {self.project.title}"


class ProjectComment(BaseModel):
    """
    Model for comments on projects
    """
    project = models.ForeignKey(
        Project,
        on_delete=models.CASCADE,
        related_name='comments'
    )
    
    parent = models.ForeignKey(
        'self',
        null=True,
        blank=True,
        on_delete=models.CASCADE,
        related_name='replies'
    )
    
    # Commenter info
    name = models.CharField(max_length=100)
    email = models.EmailField()
    website = models.URLField(blank=True, help_text="Optional")
    
    # Comment content
    content = models.TextField()
    
    # Moderation
    is_approved = models.BooleanField(default=False)
    is_spam = models.BooleanField(default=False)
    
    # Tracking
    ip_address = models.GenericIPAddressField(null=True, blank=True)
    user_agent = models.TextField(blank=True)

    class Meta:
        verbose_name = "Project Comment"
        verbose_name_plural = "Project Comments"
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['project', 'is_approved']),
        ]

    def __str__(self):
        return f"Comment by {self.name} on {self.project.title}"
=================================================================
FILE: ./media_portfolio/projects/views.py
=================================================================
from django.shortcuts import render, get_object_or_404, redirect  # Added redirect here
from django.views.generic import ListView, DetailView, View
from django.http import JsonResponse, HttpResponseBadRequest
from django.contrib import messages
from django.db.models import Q, Count
from django.core.paginator import Paginator
from django.utils.decorators import method_decorator
from django.views.decorators.csrf import csrf_exempt
from django.utils import timezone
import json

from .models import Project, ProjectLike, ProjectComment
from .forms import ProjectCommentForm, ProjectFilterForm
from media_portfolio.categories.models import Category


class ProjectListView(ListView):
    """
    View for listing all projects with filtering
    """
    model = Project
    template_name = 'projects/project_list.html'
    context_object_name = 'projects'
    paginate_by = 9

    def get_queryset(self):
        queryset = Project.objects.filter(is_published=True)
        
        # Apply filters
        form = ProjectFilterForm(self.request.GET)
        if form.is_valid():
            difficulty = form.cleaned_data.get('difficulty')
            category_id = form.cleaned_data.get('category')
            search = form.cleaned_data.get('search')
            featured_only = form.cleaned_data.get('featured_only')
            sort = form.cleaned_data.get('sort')

            if difficulty:
                queryset = queryset.filter(difficulty_level=difficulty)
            
            if category_id:
                queryset = queryset.filter(categories__id=category_id)
            
            if search:
                queryset = queryset.filter(
                    Q(title__icontains=search) |
                    Q(short_summary__icontains=search) |
                    Q(description__icontains=search) |
                    Q(tags__icontains=search)
                )
            
            if featured_only:
                queryset = queryset.filter(is_featured=True)
            
            if sort:
                queryset = queryset.order_by(sort)
            else:
                queryset = queryset.order_by('-is_featured', '-published_date')
        
        # Annotate with like count
        queryset = queryset.annotate(like_count=Count('likes'))
        
        return queryset.prefetch_related('categories')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['filter_form'] = ProjectFilterForm(self.request.GET or None)
        context['categories'] = Category.objects.filter(
            is_active=True
        ).annotate(
            project_count=Count('projects')
        )
        context['difficulty_counts'] = {
            level: Project.objects.filter(
                is_published=True,
                difficulty_level=level
            ).count()
            for level, _ in Project.DIFFICULTY_LEVELS
        }
        context['featured_projects'] = Project.objects.filter(
            is_published=True,
            is_featured=True
        )[:3]
        return context


class FeaturedProjectsView(ListView):
    """
    View for featured projects
    """
    model = Project
    template_name = 'projects/featured_projects.html'
    context_object_name = 'projects'
    paginate_by = 12

    def get_queryset(self):
        return Project.objects.filter(
            is_published=True,
            is_featured=True
        ).annotate(
            like_count=Count('likes')
        ).order_by('-performance_score', '-published_date')


class ProjectsByDifficultyView(ListView):
    """
    View for projects filtered by difficulty level
    """
    model = Project
    template_name = 'projects/project_list.html'
    context_object_name = 'projects'
    paginate_by = 12

    def get_queryset(self):
        level = self.kwargs.get('level')
        return Project.objects.filter(
            is_published=True,
            difficulty_level=level
        ).annotate(
            like_count=Count('likes')
        ).order_by('-is_featured', '-published_date')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['current_difficulty'] = self.kwargs.get('level')
        context['difficulty_display'] = dict(Project.DIFFICULTY_LEVELS).get(
            self.kwargs.get('level'), 'Projects'
        )
        return context


class ProjectDetailView(DetailView):
    """
    View for displaying a single project
    """
    model = Project
    template_name = 'projects/project_detail.html'
    context_object_name = 'project'
    slug_field = 'slug'
    slug_url_kwarg = 'slug'

    def get_queryset(self):
        return Project.objects.filter(is_published=True)

    def get(self, request, *args, **kwargs):
        response = super().get(request, *args, **kwargs)
        
        # Increment view count
        if not request.session.get(f'viewed_project_{self.object.id}'):
            self.object.increment_view_count()
            request.session[f'viewed_project_{self.object.id}'] = True
        
        return response

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        project = self.object
        
        # Get like count and check if user liked
        context['like_count'] = project.likes.count()
        session_key = self.request.session.session_key
        if session_key:
            context['user_liked'] = project.likes.filter(session_key=session_key).exists()
        else:
            context['user_liked'] = False
        
        # Get approved comments
        context['comments'] = project.comments.filter(
            is_approved=True,
            parent=None
        ).prefetch_related('replies')[:10]
        
        # Comment form
        context['comment_form'] = ProjectCommentForm()
        
        # Related projects (same categories)
        category_ids = project.categories.values_list('id', flat=True)
        related = Project.objects.filter(
            is_published=True,
            categories__in=category_ids
        ).exclude(
            id=project.id
        ).annotate(
            like_count=Count('likes')
        ).distinct()[:4]
        context['related_projects'] = related
        
        # Next/Previous navigation
        context['next_project'] = Project.objects.filter(
            is_published=True,
            published_date__gt=project.published_date
        ).order_by('published_date').first()
        
        context['prev_project'] = Project.objects.filter(
            is_published=True,
            published_date__lt=project.published_date
        ).order_by('-published_date').first()
        
        return context


class LikeProjectView(View):
    """
    View for liking/unliking a project (AJAX)
    """
    
    def post(self, request, slug):
        project = get_object_or_404(Project, slug=slug, is_published=True)
        
        # Get or create session key
        if not request.session.session_key:
            request.session.save()
        session_key = request.session.session_key
        
        # Check if already liked
        like, created = ProjectLike.objects.get_or_create(
            project=project,
            session_key=session_key,
            defaults={
                'ip_address': self.get_client_ip(request),
                'user_agent': request.META.get('HTTP_USER_AGENT', '')[:255]
            }
        )
        
        if not created:
            # Unlike
            like.delete()
            liked = False
            message = 'Project unliked'
        else:
            liked = True
            message = 'Project liked'
        
        # Get updated count
        like_count = project.likes.count()
        
        if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
            return JsonResponse({
                'success': True,
                'liked': liked,
                'like_count': like_count,
                'message': message
            })
        
        messages.success(request, message)
        return redirect('projects:detail', slug=project.slug)
    
    def get_client_ip(self, request):
        x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            return x_forwarded_for.split(',')[0]
        return request.META.get('REMOTE_ADDR')


class AddCommentView(View):
    """
    View for adding comments to projects
    """
    
    def post(self, request, slug):
        project = get_object_or_404(Project, slug=slug, is_published=True)
        
        form = ProjectCommentForm(request.POST)
        if form.is_valid():
            comment = form.save(commit=False)
            comment.project = project
            
            # Set parent if this is a reply
            parent_id = request.POST.get('parent_id')
            if parent_id:
                try:
                    comment.parent = ProjectComment.objects.get(id=parent_id)
                except ProjectComment.DoesNotExist:
                    pass
            
            # Capture IP and user agent
            comment.ip_address = self.get_client_ip(request)
            comment.user_agent = request.META.get('HTTP_USER_AGENT', '')[:255]
            
            comment.save()
            
            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
                return JsonResponse({
                    'success': True,
                    'message': 'Comment submitted and awaiting moderation.',
                    'comment': {
                        'name': comment.name,
                        'content': comment.content,
                        'created_at': comment.created_at.strftime('%B %d, %Y'),
                    }
                })
            else:
                messages.success(request, 'Your comment has been submitted and is awaiting moderation.')
                return redirect('projects:detail', slug=project.slug)
        else:
            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
                return JsonResponse({
                    'success': False,
                    'errors': form.errors
                }, status=400)
            else:
                for field, errors in form.errors.items():
                    for error in errors:
                        messages.error(request, f"{field}: {error}")
                return redirect('projects:detail', slug=project.slug)
    
    def get_client_ip(self, request):
        x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            return x_forwarded_for.split(',')[0]
        return request.META.get('REMOTE_ADDR')


class LoadCommentsView(View):
    """
    View for loading more comments via AJAX
    """
    
    def get(self, request, slug):
        project = get_object_or_404(Project, slug=slug, is_published=True)
        
        # Get approved comments
        comments = project.comments.filter(
            is_approved=True,
            parent=None
        ).prefetch_related('replies')
        
        # Paginate
        page = int(request.GET.get('page', 1))
        per_page = 10
        start = (page - 1) * per_page
        end = start + per_page
        
        comments_page = comments[start:end]
        has_next = comments.count() > end
        
        # Render comments HTML
        from django.template.loader import render_to_string
        html = render_to_string('projects/comment_list_items.html', {
            'comments': comments_page
        })
        
        return JsonResponse({
            'success': True,
            'html': html,
            'has_next': has_next,
            'next_page': page + 1 if has_next else None
        })
=================================================================
FILE: ./media_portfolio/projects/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'projects'

urlpatterns = [
    path('', views.ProjectListView.as_view(), name='list'),
    path('featured/', views.FeaturedProjectsView.as_view(), name='featured'),
    path('difficulty/<str:level>/', views.ProjectsByDifficultyView.as_view(), name='by_difficulty'),
    path('<slug:slug>/', views.ProjectDetailView.as_view(), name='detail'),
    path('<slug:slug>/like/', views.LikeProjectView.as_view(), name='like'),
    path('<slug:slug>/comment/', views.AddCommentView.as_view(), name='add_comment'),
    path('<slug:slug>/load-comments/', views.LoadCommentsView.as_view(), name='load_comments'),
]
=================================================================
FILE: ./media_portfolio/projects/forms.py
=================================================================
from django import forms
from .models import Project, ProjectComment


class ProjectForm(forms.ModelForm):
    """
    Form for creating/editing projects
    """
    class Meta:
        model = Project
        fields = '__all__'
        widgets = {
            'title': forms.TextInput(attrs={'class': 'form-control'}),
            'short_summary': forms.TextInput(attrs={'class': 'form-control'}),
            'description': forms.Textarea(attrs={'class': 'form-control', 'rows': 5}),
            'problem_statement': forms.Textarea(attrs={'class': 'form-control', 'rows': 4}),
            'solution': forms.Textarea(attrs={'class': 'form-control', 'rows': 4}),
            'technical_stack': forms.Textarea(attrs={
                'class': 'form-control',
                'placeholder': '["Python", "Django", "React"]'
            }),
            'api_integrations': forms.Textarea(attrs={
                'class': 'form-control',
                'placeholder': '["Stripe", "OpenAI"]'
            }),
            'tags': forms.TextInput(attrs={'class': 'form-control'}),
            'github_url': forms.URLInput(attrs={'class': 'form-control'}),
            'live_demo_url': forms.URLInput(attrs={'class': 'form-control'}),
            'documentation_url': forms.URLInput(attrs={'class': 'form-control'}),
            'difficulty_level': forms.Select(attrs={'class': 'form-select'}),
            'performance_score': forms.NumberInput(attrs={'class': 'form-control', 'min': 0, 'max': 100}),
            'is_featured': forms.CheckboxInput(attrs={'class': 'form-check-input'}),
            'is_published': forms.CheckboxInput(attrs={'class': 'form-check-input'}),
            'published_date': forms.DateTimeInput(attrs={'class': 'form-control', 'type': 'datetime-local'}),
            'license': forms.Select(attrs={'class': 'form-select'}),
        }

    def clean_technical_stack(self):
        """Validate technical stack is proper JSON"""
        data = self.cleaned_data.get('technical_stack')
        if isinstance(data, str):
            try:
                import json
                data = json.loads(data)
            except:
                raise forms.ValidationError("Invalid JSON format. Use: [\"Python\", \"Django\"]")
        return data

    def clean_api_integrations(self):
        """Validate API integrations is proper JSON"""
        data = self.cleaned_data.get('api_integrations')
        if isinstance(data, str):
            try:
                import json
                data = json.loads(data)
            except:
                raise forms.ValidationError("Invalid JSON format. Use: [\"Stripe\", \"OpenAI\"]")
        return data


class ProjectCommentForm(forms.ModelForm):
    """
    Form for submitting project comments
    """
    class Meta:
        model = ProjectComment
        fields = ['name', 'email', 'website', 'content']
        widgets = {
            'content': forms.Textarea(attrs={
                'rows': 4,
                'class': 'form-control',
                'placeholder': 'Share your thoughts about this project...'
            }),
            'name': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Your name'
            }),
            'email': forms.EmailInput(attrs={
                'class': 'form-control',
                'placeholder': 'your@email.com'
            }),
            'website': forms.URLInput(attrs={
                'class': 'form-control',
                'placeholder': 'https://yourwebsite.com (optional)'
            }),
        }

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.fields['website'].required = False


class ProjectFilterForm(forms.Form):
    """
    Form for filtering projects
    """
    difficulty = forms.ChoiceField(
        choices=[('', 'All Difficulties')] + Project.DIFFICULTY_LEVELS,
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
    
    category = forms.IntegerField(
        required=False,
        widget=forms.HiddenInput()
    )
    
    search = forms.CharField(
        required=False,
        widget=forms.TextInput(attrs={
            'class': 'form-control',
            'placeholder': 'Search projects...'
        })
    )
    
    featured_only = forms.BooleanField(
        required=False,
        widget=forms.CheckboxInput(attrs={
            'class': 'form-check-input'
        })
    )
    
    sort = forms.ChoiceField(
        choices=[
            ('-published_date', 'Newest First'),
            ('published_date', 'Oldest First'),
            ('-stars_count', 'Most Stars'),
            ('-performance_score', 'Highest Performance'),
            ('title', 'Title A-Z'),
        ],
        required=False,
        widget=forms.Select(attrs={'class': 'form-select'})
    )
=================================================================
FILE: ./media_portfolio/blog/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/blog/admin.py
=================================================================
from django.contrib import admin
from .models import BlogPost, BlogSyncLog


@admin.register(BlogPost)
class BlogPostAdmin(admin.ModelAdmin):
    list_display = ['title', 'source', 'published_at', 'read_time_minutes', 'is_featured', 'is_published']
    list_filter = ['source', 'is_featured', 'is_published', 'published_at']
    search_fields = ['title', 'excerpt', 'author_name']
    readonly_fields = ['external_id', 'external_url', 'reactions_count', 'comments_count']
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('title', 'slug', 'source', 'external_id', 'external_url')
        }),
        ('Content', {
            'fields': ('excerpt', 'content', 'cover_image')
        }),
        ('Metadata', {
            'fields': ('author_name', 'published_at', 'read_time_minutes')
        }),
        ('Statistics', {
            'fields': ('reactions_count', 'comments_count'),
            'classes': ('collapse',)
        }),
        ('Display', {
            'fields': ('is_featured', 'is_published', 'sort_order')
        }),
    )
    
    actions = ['mark_as_featured', 'mark_as_not_featured']
    
    def mark_as_featured(self, request, queryset):
        queryset.update(is_featured=True)
    mark_as_featured.short_description = "Mark selected as featured"
    
    def mark_as_not_featured(self, request, queryset):
        queryset.update(is_featured=False)
    mark_as_not_featured.short_description = "Mark selected as not featured"


@admin.register(BlogSyncLog)
class BlogSyncLogAdmin(admin.ModelAdmin):
    list_display = ['source', 'synced_at', 'posts_created', 'posts_updated', 'status']
    list_filter = ['source', 'status', 'synced_at']
    readonly_fields = ['source', 'synced_at', 'posts_created', 'posts_updated', 'status', 'error_message']
    
    def has_add_permission(self, request):
        return False
    
    def has_change_permission(self, request, obj=None):
        return False
=================================================================
FILE: ./media_portfolio/blog/apps.py
=================================================================
from django.apps import AppConfig


class BlogConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.blog'
    verbose_name = 'Blog Integration'
=================================================================
FILE: ./media_portfolio/blog/models.py
=================================================================
from django.db import models
from media_portfolio.core.models import BaseModel


class BlogPost(BaseModel):
    """
    Model for storing blog posts from external sources (Dev.to, Medium)
    """
    SOURCE_CHOICES = [
        ('devto', 'Dev.to'),
        ('medium', 'Medium'),
        ('custom', 'Custom'),
    ]

    title = models.CharField(max_length=300)
    slug = models.SlugField(max_length=350, unique=True)
    
    # External source info
    source = models.CharField(max_length=20, choices=SOURCE_CHOICES, default='devto')
    external_id = models.CharField(max_length=100, blank=True, help_text="External post ID")
    external_url = models.URLField()
    
    # Content
    excerpt = models.TextField(help_text="Short excerpt/summary")
    content = models.TextField(blank=True, help_text="Full content (if available)")
    
    # Media
    cover_image = models.URLField(blank=True, help_text="Cover image URL")
    
    # Metadata
    author_name = models.CharField(max_length=100, default="Author")
    published_at = models.DateTimeField()
    
    # Stats
    read_time_minutes = models.IntegerField(default=0)
    reactions_count = models.IntegerField(default=0)
    comments_count = models.IntegerField(default=0)
    
    # Display
    is_featured = models.BooleanField(default=False)
    is_published = models.BooleanField(default=True)

    class Meta:
        verbose_name = "Blog Post"
        verbose_name_plural = "Blog Posts"
        ordering = ['-published_at']
        indexes = [
            models.Index(fields=['source', '-published_at']),
            models.Index(fields=['is_featured', '-published_at']),
        ]

    def __str__(self):
        return self.title

    def get_absolute_url(self):
        return self.external_url  # Link to original post


class BlogSyncLog(BaseModel):
    """
    Log for blog sync operations
    """
    source = models.CharField(max_length=20, choices=BlogPost.SOURCE_CHOICES)
    synced_at = models.DateTimeField(auto_now_add=True)
    posts_created = models.IntegerField(default=0)
    posts_updated = models.IntegerField(default=0)
    status = models.CharField(max_length=20, default='success')
    error_message = models.TextField(blank=True)

    class Meta:
        verbose_name = "Blog Sync Log"
        verbose_name_plural = "Blog Sync Logs"
        ordering = ['-synced_at']

    def __str__(self):
        return f"{self.source} sync at {self.synced_at}"
=================================================================
FILE: ./media_portfolio/blog/views.py
=================================================================
from django.views.generic import ListView, TemplateView
from django.core.cache import cache
from .models import BlogPost


class BlogListView(ListView):
    """
    View for listing blog posts
    """
    model = BlogPost
    template_name = 'blog/blog_list.html'
    context_object_name = 'posts'
    paginate_by = 9

    def get_queryset(self):
        return BlogPost.objects.filter(
            is_published=True
        ).order_by('-published_at')


class LatestPostsView(TemplateView):
    """
    View for latest posts widget (for homepage)
    """
    template_name = 'blog/latest_posts_widget.html'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Try to get from cache
        posts = cache.get('latest_blog_posts')
        
        if posts is None:
            posts = BlogPost.objects.filter(
                is_published=True
            ).order_by('-published_at')[:5]
            
            # Cache for 1 hour
            cache.set('latest_blog_posts', posts, 3600)
        
        context['posts'] = posts
        return context
=================================================================
FILE: ./media_portfolio/blog/urls.py
=================================================================
from django.urls import path
from . import views

app_name = 'blog'

urlpatterns = [
    path('', views.BlogListView.as_view(), name='list'),
    path('latest/', views.LatestPostsView.as_view(), name='latest'),
]
=================================================================
FILE: ./media_portfolio/blog/forms.py
=================================================================
(empty or not found)

=================================================================
FILE: ./media_portfolio/github/__init__.py
=================================================================

=================================================================
FILE: ./media_portfolio/github/admin.py
=================================================================
from django.contrib import admin
from .models import GitHubRepo, GitHubSyncLog


@admin.register(GitHubRepo)
class GitHubRepoAdmin(admin.ModelAdmin):
    list_display = ['name', 'primary_language', 'stars_count', 'forks_count', 'last_synced']
    list_filter = ['primary_language', 'last_synced']
    search_fields = ['name', 'full_name', 'description']
    readonly_fields = ['full_name', 'html_url', 'clone_url', 'created_at_github', 'last_synced']
    
    fieldsets = (
        ('Basic Information', {
            'fields': ('name', 'full_name', 'description')
        }),
        ('URLs', {
            'fields': ('html_url', 'clone_url', 'homepage')
        }),
        ('Statistics', {
            'fields': ('stars_count', 'forks_count', 'watchers_count', 'open_issues_count')
        }),
        ('Languages', {
            'fields': ('primary_language', 'languages')
        }),
        ('Dates', {
            'fields': ('created_at_github', 'updated_at_github', 'pushed_at_github', 'last_synced')
        }),
    )
    
    def has_add_permission(self, request):
        return False


@admin.register(GitHubSyncLog)
class GitHubSyncLogAdmin(admin.ModelAdmin):
    list_display = ['synced_at', 'repos_created', 'repos_updated', 'status']
    list_filter = ['status', 'synced_at']
    readonly_fields = ['synced_at', 'repos_created', 'repos_updated', 'status', 'error_message']
    
    def has_add_permission(self, request):
        return False
=================================================================
FILE: ./media_portfolio/github/apps.py
=================================================================
from django.apps import AppConfig


class GithubConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'media_portfolio.github'
    verbose_name = 'GitHub Integration'
=================================================================
FILE: ./media_portfolio/github/models.py
=================================================================
from django.db import models
from media_portfolio.core.models import BaseModel


class GitHubRepo(BaseModel):
    """
    Model for GitHub repository data
    """
    name = models.CharField(max_length=200)
    full_name = models.CharField(max_length=300, unique=True)
    description = models.TextField(blank=True)
    
    # URLs
    html_url = models.URLField()
    clone_url = models.URLField()
    homepage = models.URLField(blank=True)
    
    # Stats
    stars_count = models.IntegerField(default=0)
    forks_count = models.IntegerField(default=0)
    watchers_count = models.IntegerField(default=0)
    open_issues_count = models.IntegerField(default=0)
    
    # Languages
    primary_language = models.CharField(max_length=50, blank=True)
    languages = models.JSONField(default=dict, blank=True)
    
    # Dates
    created_at_github = models.DateTimeField()
    updated_at_github = models.DateTimeField()
    pushed_at_github = models.DateTimeField()
    
    # Sync
    last_synced = models.DateTimeField(auto_now=True)

    class Meta:
        verbose_name = "GitHub Repository"
        verbose_name_plural = "GitHub Repositories"
        ordering = ['-stars_count']

    def __str__(self):
        return self.full_name


class GitHubSyncLog(BaseModel):
    """
    Log for GitHub sync operations
    """
    synced_at = models.DateTimeField(auto_now_add=True)
    repos_created = models.IntegerField(default=0)
    repos_updated = models.IntegerField(default=0)
    status = models.CharField(max_length=20, default='success')
    error_message = models.TextField(blank=True)

    class Meta:
        verbose_name = "GitHub Sync Log"
        verbose_name_plural = "GitHub Sync Logs"
        ordering = ['-synced_at']

    def __str__(self):
        return f"GitHub sync at {self.synced_at}"
=================================================================
FILE: ./media_portfolio/github/views.py
=================================================================
from django.shortcuts import render

# Create your views here.

=================================================================
FILE: ./media_portfolio/github/urls.py
=================================================================

=================================================================
FILE: ./media_portfolio/github/forms.py
=================================================================
(empty or not found)

>>> CONFIG FOLDER FILES <<<

=================================================================
FILE: ./config/__init__.py
=================================================================
# This will make sure the app is always imported when
# Django starts so that shared_task will use this app.
from .celery import app as celery_app

__all__ = ('celery_app',)
=================================================================
FILE: ./config/asgi.py
=================================================================
"""
ASGI config for media portfolio project.
"""

import os
from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_asgi_application()
=================================================================
FILE: ./config/settings.py
=================================================================
"""
Django settings for media portfolio project.
"""

from pathlib import Path
import os
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = os.getenv('SECRET_KEY', 'django-insecure-default-key-change-me')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = os.getenv('DEBUG', 'True') == 'True'

ALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', 'localhost,127.0.0.1').split(',')

INSTALLED_APPS = [
    # Jazzmin must be before django.contrib.admin
    'jazzmin',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    # Third-party apps
    'django_cleanup.apps.CleanupConfig',  # Auto-delete old files
    
    # Add these for task scheduling
    'django_celery_beat',
    'django_celery_results',
    
    # Local apps
    'media_portfolio.core',
    'media_portfolio.media',
    'media_portfolio.categories',
    'media_portfolio.comments',
    'media_portfolio.inquiries',
    'media_portfolio.collections',
    'media_portfolio.projects',  # Add this
    'media_portfolio.blog',       # Add this
    'media_portfolio.github',     # Add this
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'config.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'media_portfolio.core.context_processors.site_settings',
                'media_portfolio.core.context_processors.theme_preference',  # Add this
            ],
        },
    },
]

WSGI_APPLICATION = 'config.wsgi.application'

# Database
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# Password validation
AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

# Internationalization
LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

# Static files (CSS, JavaScript, Images)
STATIC_URL = 'static/'
STATICFILES_DIRS = [BASE_DIR / 'static']
STATIC_ROOT = BASE_DIR / 'staticfiles'

# Media files
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# Default primary key field type
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# File upload settings
FILE_UPLOAD_MAX_MEMORY_SIZE = 10485760  # 10MB
DATA_UPLOAD_MAX_MEMORY_SIZE = 10485760  # 10MB

# Security settings for production
if not DEBUG:
    SECURE_SSL_REDIRECT = True
    SESSION_COOKIE_SECURE = True
    CSRF_COOKIE_SECURE = True
    SECURE_BROWSER_XSS_FILTER = True
    SECURE_CONTENT_TYPE_NOSNIFF = True
    X_FRAME_OPTIONS = 'DENY'
    SECURE_HSTS_SECONDS = 31536000
    SECURE_HSTS_INCLUDE_SUBDOMAINS = True
    SECURE_HSTS_PRELOAD = True



# ============================================================================
# CELERY CONFIGURATION
# ============================================================================

CELERY_BROKER_URL = os.getenv('CELERY_BROKER_URL', 'redis://localhost:6379/0')
CELERY_RESULT_BACKEND = 'django-db'
CELERY_ACCEPT_CONTENT = ['application/json']
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_TIMEZONE = TIME_ZONE

CELERY_BEAT_SCHEDULE = {
    'sync-github-repos': {
        'task': 'media_portfolio.github.tasks.sync_github_repos',
        'schedule': 86400.0,  # 24 hours
        'args': (os.getenv('GITHUB_USERNAME', ''),),
    },
    'sync-blog-posts': {
        'task': 'media_portfolio.blog.tasks.sync_blog_posts',
        'schedule': 21600.0,  # 6 hours
        'args': (os.getenv('DEVTO_USERNAME', ''),),
    },
}

# ============================================================================
# CACHING CONFIGURATION
# ============================================================================

CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        'LOCATION': os.getenv('REDIS_URL', 'redis://localhost:6379/1'),
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# Cache timeout in seconds (24 hours)
CACHE_TTL = 60 * 60 * 24

# ============================================================================
# GITHUB API CONFIGURATION
# ============================================================================

GITHUB_USERNAME = os.getenv('GITHUB_USERNAME', '')
GITHUB_TOKEN = os.getenv('GITHUB_TOKEN', '')  # Optional, for higher rate limits

# ============================================================================
# DEV.TO API CONFIGURATION
# ============================================================================

DEVTO_USERNAME = os.getenv('DEVTO_USERNAME', '')

# ============================================================================
# MEDIUM RSS CONFIGURATION
# ============================================================================

MEDIUM_USERNAME = os.getenv('MEDIUM_USERNAME', '')

# ============================================================================
# JAZZMIN CONFIGURATION - Professional Admin Theme with High Contrast Colors
# ============================================================================

JAZZMIN_SETTINGS = {
    # Title and branding
    "site_title": "Media Portfolio Admin",
    "site_header": "Media Portfolio",
    "site_brand": "MP Admin",
    "site_logo": None,  # Add path to your logo if available
    "login_logo": None,
    "login_logo_dark": None,
    "site_icon": None,
    "welcome_sign": "Welcome to Media Portfolio Administration",
    "copyright": "Media Portfolio © 2026",
    "search_model": ["auth.User", "media.MediaItem", "comments.Comment"],
    
    # User avatar
    "user_avatar": None,
    
    # Top Menu
    "topmenu_links": [
        {"name": "Home", "url": "admin:index", "permissions": ["auth.view_user"]},
        {"name": "View Site", "url": "/", "new_window": True},
        {"name": "Media Gallery", "url": "/media/", "new_window": True},
        {"name": "Collections", "url": "/collections/", "new_window": True},
        {"app": "auth"},
        {"app": "media"},
    ],
    
    # User Menu
    "usermenu_links": [
        {"name": "Support", "url": "https://github.com/yourusername/media-portfolio/issues", "new_window": True},
        {"model": "auth.user"}
    ],
    
    # Side Menu
    "show_sidebar": True,
    "navigation_expanded": True,
    "hide_apps": [],
    "hide_models": [],
    
    # Order of apps and models in the menu
    "order_with_respect_to": ["auth", "core", "media", "categories", "comments", "inquiries", "collections"],
    
    # Custom icons for apps and models
    "icons": {
        "auth": "fas fa-users-cog",
        "auth.user": "fas fa-user",
        "auth.group": "fas fa-users",
        "core": "fas fa-home",
        "core.sitesettings": "fas fa-cog",
        "media": "fas fa-image",
        "media.mediaitem": "fas fa-film",
        "categories": "fas fa-folder-open",
        "categories.category": "fas fa-tags",
        "comments": "fas fa-comment",
        "comments.comment": "fas fa-comments",
        "comments.testimonial": "fas fa-star",
        "inquiries": "fas fa-envelope",
        "inquiries.inquiry": "fas fa-inbox",
        "collections": "fas fa-layer-group",
        "collections.collection": "fas fa-th-large",
    },
    
    # Default icons for parent/child menu items
    "default_icon_parents": "fas fa-chevron-circle-right",
    "default_icon_children": "fas fa-circle",
    
    # Related modal
    "related_modal_active": True,
    
    # Custom links to append to side menu
    "custom_links": {
        "media": [{
            "name": "Upload Media", 
            "url": "admin:media_mediaitem_add", 
            "icon": "fas fa-upload",
            "permissions": ["media.add_mediaitem"]
        }],
        "comments": [{
            "name": "Pending Moderation", 
            "url": "/admin/comments/comment/?is_approved__exact=0", 
            "icon": "fas fa-clock",
            "permissions": ["comments.change_comment"]
        }]
    },
    
    # UI Customizer - Enable if you want to customize via UI
    "show_ui_builder": False,
    
    # Change form formatting
    "changeform_format": "horizontal_tabs",
    "changeform_format_overrides": {
        "auth.user": "collapsible",
        "auth.group": "vertical_tabs",
        "media.mediaitem": "horizontal_tabs",
    },
}

# ============================================================================
# JAZZMIN UI THEME - High Contrast Professional Colors
# ============================================================================

JAZZMIN_UI_TWEAKS = {
    # Theme: Choose from available themes
    "theme": "darkly",  # Dark theme with high contrast
    
    # Color scheme
    "navbar": "navbar-dark",  # Options: navbar-dark, navbar-light
    "navbar_fixed": True,
    "navbar_color": "#1a1a2e",  # Deep midnight blue/purple
    
    # Sidebar
    "sidebar": "sidebar-dark-primary",
    "sidebar_fixed": True,
    "sidebar_color": "#16213e",  # Rich dark blue with purple undertones
    
    # Brand/text colors
    "brand_color": "#ffffff",  # White brand text
    "brand_small_text": False,
    "text_color": "#e9ecef",  # Light gray text
    "text_muted_color": "#adb5bd",  # Muted text color
    
    # Links - Purple/Blue gradient effect
    "link_color": "#9d4edd",  # Vibrant purple
    "link_hover_color": "#c77dff",  # Light purple on hover
    
    # Primary accent color (buttons, active items)
    "primary": "#6a4c9c",  # Royal purple
    "primary_hover": "#7d5fb0",  # Lighter purple on hover
    
    # Secondary accent
    "secondary": "#4a6fa5",  # Steel blue
    "secondary_hover": "#5d82b8",  # Lighter blue
    
    # Info/Success/Warning/Danger colors
    "info": "#3b8ea5",  # Teal blue
    "success": "#2a9d8f",  # Green-blue
    "warning": "#e9c46a",  # Warm yellow
    "danger": "#e76f51",  # Coral
    
    # Custom accent colors for specific elements
    "accent_blue": "#4361ee",  # Bright blue
    "accent_purple": "#9d4edd",  # Purple
    "accent_violet": "#7209b7",  # Deep violet
    "accent_indigo": "#3a0ca3",  # Indigo
    
    # Buttons
    "button_classes": {
        "primary": "btn-primary",
        "secondary": "btn-secondary",
        "info": "btn-info",
        "warning": "btn-warning",
        "danger": "btn-danger",
        "success": "btn-success",
    },
    
    # Tables
    "table_classes": "table table-striped table-hover",
    "table_striped": True,
    "table_hover": True,
    "table_bordered": False,
    "table_condensed": False,
    
    # Cards
    "card_border_radius": "8px",
    "card_shadow": "0 4px 12px rgba(106, 76, 156, 0.15)",  # Purple-tinted shadow
    "card_highlight": "#6a4c9c",  # Purple highlight for cards
    
    # Input fields
    "input_border_radius": "6px",
    "input_shadow": "inset 0 1px 3px rgba(0,0,0,0.1)",
    "input_focus_border": "#9d4edd",  # Purple focus border
    "input_focus_shadow": "0 0 0 3px rgba(157, 78, 221, 0.25)",  # Purple focus glow
    
    # Alerts
    "alert_border_radius": "8px",
    "alert_shadow": "0 2px 6px rgba(0,0,0,0.1)",
    
    # Dropdowns
    "dropdown_border_radius": "6px",
    "dropdown_shadow": "0 4px 12px rgba(0,0,0,0.2)",
    "dropdown_item_hover": "#6a4c9c",  # Purple hover for dropdown items
    "dropdown_item_hover_color": "#ffffff",  # White text on hover
    
    # Badges
    "badge_border_radius": "4px",
    "badge_primary_bg": "#6a4c9c",  # Purple badge background
    "badge_secondary_bg": "#4a6fa5",  # Blue badge background
    
    # Progress bars
    "progress_bar_primary": "#6a4c9c",  # Purple progress bar
    
    # List groups
    "list_group_active_bg": "#6a4c9c",  # Purple active list item
    "list_group_active_color": "#ffffff",  # White text on active
    
    # Action buttons
    "actions_sticky_top": True,
    
    # Dark mode toggle
    "dark_mode_theme": "cyborg",  # Optional dark mode theme
    
    # Custom CSS classes for specific elements
    "custom_css": """
        /* Custom purple/blue gradient for headers */
        .main-header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%) !important;
        }
        
        /* Purple glow for active menu items */
        .nav-sidebar .nav-item .nav-link.active {
            background: linear-gradient(90deg, #6a4c9c 0%, #4a6fa5 100%) !important;
            box-shadow: 0 2px 10px rgba(106, 76, 156, 0.3);
        }
        
        /* Blue hover effect for menu items */
        .nav-sidebar .nav-item .nav-link:hover {
            background: rgba(74, 111, 165, 0.2) !important;
        }
        
        /* Purple borders for cards */
        .card {
            border-top: 3px solid #6a4c9c !important;
        }
        
        /* Blue buttons */
        .btn-primary {
            background: linear-gradient(135deg, #6a4c9c 0%, #4a6fa5 100%) !important;
            border: none !important;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #7d5fb0 0%, #5d82b8 100%) !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(106, 76, 156, 0.3);
        }
        
        /* Purple badges */
        .badge-primary {
            background: linear-gradient(135deg, #9d4edd 0%, #6a4c9c 100%) !important;
        }
        
        /* Blue badges */
        .badge-info {
            background: linear-gradient(135deg, #3a86ff 0%, #4a6fa5 100%) !important;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1a2e;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #6a4c9c;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #9d4edd;
        }
    """,
}
    
# Alternative HIGH CONTRAST themes you can try by changing "theme" above:
# "theme": "cyborg"     # High contrast dark theme with neon accents
# "theme": "darkly"     # Professional dark theme (current)
# "theme": "slate"      # Blue-gray dark theme
# "theme": "superhero"  # Navy blue theme with orange accents
# "theme": "materia"    # Material design with good contrast

# Remove or comment out the old SUIT_CONFIG since we're using Jazzmin now
# SUIT_CONFIG = { ... }
=================================================================
FILE: ./config/urls.py
=================================================================
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
from media_portfolio.core.views import SetThemeView  # Add this import

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('media_portfolio.core.urls')),
    path('media/', include('media_portfolio.media.urls')),
    path('categories/', include('media_portfolio.categories.urls')),
    path('collections/', include('media_portfolio.collections.urls')),
    path('inquiries/', include('media_portfolio.inquiries.urls')),
    path('projects/', include('media_portfolio.projects.urls')),  # Add this
    path('blog/', include('media_portfolio.blog.urls')),  # Add this
    
    # Theme API
    path('set-theme/', SetThemeView.as_view(), name='set_theme'),  # Add this
]

# Serve media files in development
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
=================================================================
FILE: ./config/wsgi.py
=================================================================
"""
WSGI config for media portfolio project.
"""

import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_wsgi_application()
>>> ROOT FILES <<<

=================================================================
FILE: ./manage.py
=================================================================
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys
from dotenv import load_dotenv


def main():
    """Run administrative tasks."""
    # Load environment variables
    load_dotenv()
    
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()
